try{let t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="986eb20f-23b0-4806-9f83-a4c4f32c0004",t._sentryDebugIdIdentifier="sentry-dbid-986eb20f-23b0-4806-9f83-a4c4f32c0004")}catch(e){}{let t="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{};t.SENTRY_RELEASE={id:"5.13.0"}}(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LoginPage"],{"03f6":function(t,e,a){"use strict";function s(t){const e=t.trim().toLowerCase();return e&&-1===e.indexOf("@")?e+"@startmail.com":e}a.d(e,"a",(function(){return s}))},"0c45":function(t,e,a){"use strict";a("f169")},"1e41":function(t,e,a){"use strict";a("c662")},"34f1":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("d9e2");var s=a("2b0e");function n(t,e){return function(){return this.isBusy[t]?Promise.reject(new i(`Action with id '${t}' is still pending`)):(this.$set(this.isBusy,t,!0),Promise.resolve(e.apply(this,arguments)).finally(()=>{this.$set(this.isBusy,t,!1)}))}}e["b"]=s["a"].extend({data(){return{isBusy:{}}}});class i extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,i)}}},4125:function(t,e,a){t.exports=a.p+"img/paper-plane-illustration.1ea524a9.svg"},"45a8":function(t,e,a){},"4ca4":function(t,e,a){t.exports=a.p+"img/envelope-illustration.7157bfca.svg"},"82ff":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"checkbox"},[e("label",{directives:[{name:"test",rawName:"v-test:checkbox",arg:"checkbox"}],staticClass:"checkbox__input-wrapper",on:{click:function(e){return e.shiftKey?(e.preventDefault(),t.onClick.apply(null,arguments)):null}}},[e("input",t._b({directives:[{name:"test",rawName:"v-test:checkboxInput",arg:"checkboxInput"}],key:String(t.checked),ref:"native",staticClass:"checkbox__input mousetrap",class:{"checkbox__input--indeterminate":t.indeterminate,invalid:t.isInvalid},attrs:{id:t.id,type:"checkbox"},domProps:{checked:t.checked},on:{change:t.onChange}},"input",t.$attrs,!1)),e("span",{staticClass:"checkbox__control",attrs:{"aria-hidden":"true"}}),t.$slots.default||t.label?e("span",{staticClass:"checkbox__label",class:{"visually-hidden":t.hasHiddenLabel}},[t._t("default",(function(){return[t._v(t._s(t.label))]}))],2):t._e()]),t.isInvalid||t.hint?e("div",{staticClass:"form-field__hint"},[t.isInvalid?e("p",{staticClass:"form-field__hint--invalid"},[t._v(" "+t._s(t.validationErrorMessage)+" ")]):t.hint?e("p",[t._v(t._s(t.hint))]):t._e()]):t._e()])},n=[],i=a("2b0e"),r=i["a"].extend({name:"Checkbox",inheritAttrs:!1,model:{prop:"checked",event:"change"},props:{checked:{type:Boolean,required:!1,default:!1},hasHiddenLabel:{type:Boolean,default:!1},hint:{type:String,default:""},id:{type:String,required:!0},indeterminate:{type:Boolean,default:!1},label:{type:String,required:!1,default:void 0},validate:{type:Boolean,default:!1},validationErrorMessage:{type:String,default:""},controlled:{type:Boolean,default:!1}},data(){return{shiftKeyPressed:!1,valid:!1}},computed:{native(){return this.$refs.native},isInvalid(){return this.validate&&!this.valid}},watch:{checked(){this.valid=this.native.checkValidity()}},mounted(){this.valid=this.native.checkValidity()},methods:{onClick(t){var e;this.native.disabled||(null===(e=document.getSelection())||void 0===e||e.removeAllRanges(),this.shiftKeyPressed=t.shiftKey,this.$emit("change",!this.checked,this.shiftKeyPressed),this.shiftKeyPressed=!1)},onChange(t){const e=t.target;this.indeterminate?e.checked=!1:this.controlled&&(e.checked=this.checked),this.$emit("change",e.checked)}}}),o=r,l=(a("d91c"),a("2877")),c=Object(l["a"])(o,s,n,!1,null,"189fbe42",null);e["a"]=c.exports},"98cf":function(t,e,a){"use strict";a("b0a2")},aeab:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("AuthenticationLayout",{directives:[{name:"test",rawName:"v-test:loginPage",arg:"loginPage"}],staticClass:"login",attrs:{"background-image":t.backgroundImage,"background-image-position":"bottom-right"},scopedSlots:t._u([{key:"default",fn:function(){return[t.step===t.STEP_TOTP_FORM?e("TotpForm",{attrs:{email:t.username,password:t.password},on:{processUserLogin:t.processUserLogin}}):t._e(),t.step===t.STEP_LOGIN_FORM?[t.showLoginError?e("p",{staticClass:"user-message user-message--warning spacing-bottom"},[e("Icon",{staticClass:"user-message__icon",attrs:{symbol:"warning"}}),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v(" Sorry, we could not log you in. Try again later. ")])],1):t._e(),t.fromSessionExpired?e("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"user-message user-message--warning spacing-bottom"},[t._v(" Your session has expired. Please re-enter your email address and password to log back in. ")]):t._e(),e("form",{attrs:{id:"loginForm",novalidate:"",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onFormSubmit.apply(null,arguments)}}},[e("fieldset",[e("legend",{staticClass:"visually-hidden"},[e("translate",[t._v("Log in")])],1),e("InputField",{directives:[{name:"test",rawName:"v-test:username",arg:"username"}],ref:"username",attrs:{focused:!t.username,autocomplete:"username email",required:"",disabled:t.isBusy.authenticating,validate:t.validateInput,"validation-error-message":t.usernameValidationErrorMessage,type:"email",id:"username",label:t.usernameText,"data-lphide":"true"},on:{blur:t.onUsernameBlur},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("PasswordField",{directives:[{name:"test",rawName:"v-test:password",arg:"password"}],ref:"password",staticClass:"form-field spacing-bottom",attrs:{required:"",disabled:t.isBusy.authenticating,id:"password","label-text":t.passwordText,"show-custom-validity":Boolean(t.loginError),"validation-error-message":t.loginError,"validate-input":t.validateInput,focused:Boolean(t.username),"data-lphide":"true",autocomplete:"current-password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("Checkbox",{directives:[{name:"test",rawName:"v-test:remember-username",arg:"remember-username"}],staticClass:"spacing-bottom",attrs:{id:"remember-username",label:t.rememberUsernameLabel},model:{value:t.rememberUsername,callback:function(e){t.rememberUsername=e},expression:"rememberUsername"}})],1),e("LoadingButton",{directives:[{name:"test",rawName:"v-test:submit",arg:"submit"}],staticClass:"button button--primary button--full-width spacing-bottom",attrs:{loading:t.isBusy.authenticating,type:"submit"}},[e("translate",[t._v("Log in")])],1)],1),e("feature-toggle",{attrs:{id:t.FEATURE_SIGNUP}},[e("a",{directives:[{name:"test",rawName:"v-test:signUpButton",arg:"signUpButton"}],staticClass:"button button--accent",attrs:{href:t.signupUrl}},[e("translate",[t._v("Sign up for an account")])],1)]),e("feature-toggle",{attrs:{id:t.FEATURE_RECOVERY}},[e("router-link",{directives:[{name:"test",rawName:"v-test:forgot-password",arg:"forgot-password"}],staticClass:"button login__forgot-password-button",attrs:{to:t.passwordRecoveryRoute}},[e("translate",[t._v("Forgot your password?")])],1)],1)]:t._e()]},proxy:!0},t.step===t.STEP_LOGIN_FORM?{key:"after",fn:function(){return[e("StatusBanner"),e("div",{staticClass:"blog-link"},[e("Icon",{attrs:{symbol:"paper-plane"}}),e("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:t.blogLink}},[t._v("Whatâ€™s new at StartMail")])],1)]},proxy:!0}:null],null,!0)})},n=[],i=(a("14d9"),a("79f6")),r=a("9902"),o=a("7383"),l=a("d1f6"),c=a("00a1"),u=a("8e8d"),d=a("a747"),m=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.details?e("div",{staticClass:"status-banner spacing-bottom",class:t.impactClass},[e("div",{staticClass:"status-banner__header"},[e("div",{staticClass:"status-banner__icon"},[e("Icon",{class:t.impactClass,attrs:{symbol:t.isWarning?"warning":"info"}})],1),e("div",{staticClass:"status-banner__description"},[e("strong",[t._v(t._s(t.details.name))]),t.details.schedule_date?e("p",{staticClass:"status-banner__description-date",domProps:{textContent:t._s(t.details.schedule_date)}}):t._e()])]),e("a",{staticClass:"button button--small",class:t.impactClass,attrs:{href:t.details.link,target:"_blank"}},[e("translate",[t._v("Learn more")]),e("Icon",{staticClass:"status-banner__body--icon",attrs:{size:"small",symbol:"external-link"}})],1)]):t._e()},p=[],h=a("2b0e"),g=h["a"].extend({components:{Icon:c["a"]},data(){return{statusUpdate:void 0}},computed:{impactClass(){var t;const e=null===(t=this.statusUpdate)||void 0===t||null===(t=t.incident)||void 0===t?void 0:t.impact;switch(e){case"critical":return"user-message--error";case"major":return"user-message--warning";default:return"user-message--info"}},details(){var t,e,a;return null!==(t=null===(e=this.statusUpdate)||void 0===e?void 0:e.incident)&&void 0!==t?t:null===(a=this.statusUpdate)||void 0===a?void 0:a.maintenance},isWarning(){var t;return Boolean(null===(t=this.statusUpdate)||void 0===t?void 0:t.incident)}},async created(){this.statusUpdate=await i["c"].statusUpdate.get()}}),b=g,f=(a("1e41"),a("2877")),v=Object(f["a"])(b,m,p,!1,null,null,null),_=v.exports,w=a("82ff"),y=a("02ac"),T=a("8017"),k=a("03f6"),x=a("ec51"),C=a("34f1"),E=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.showLoginError?e("p",{staticClass:"user-message user-message--warning"},[e("Icon",{staticClass:"user-message__icon",attrs:{symbol:"warning"}}),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Sorry, we could not log you in. Try again later.")])],1):t._e(),e("form",{directives:[{name:"test",rawName:"v-test:totpForm",arg:"totpForm"}],attrs:{id:"totpForm"},on:{submit:function(e){return e.preventDefault(),t.onTOTPSubmit.apply(null,arguments)}}},[e("p",{staticClass:"spacing-bottom"},[e("translate",[t._v("Open your two-factor authentication app and enter the current code or if you do not have access to your device enter your backup code to disable two-factor authentication.")])],1),e("fieldset",[e("legend",{staticClass:"visually-hidden"},[e("translate",[t._v("Log in")])],1),e("InputField",{directives:[{name:"test",rawName:"v-test:totpCode",arg:"totpCode"}],ref:"totpCode",class:{invalid:t.TOTPError},attrs:{disabled:t.isBusy.authenticatingUsingTotp,autocomplete:"one-time-code",icon:"badge",type:"text",id:"authentication_code",focused:!0,label:t.authenticationCodeText,"show-custom-validity":Boolean(t.TOTPError),"validation-error-message":t.TOTPError,validate:Boolean(t.TOTPError)},model:{value:t.TOTPToken,callback:function(e){t.TOTPToken=e},expression:"TOTPToken"}}),e("LoadingButton",{directives:[{name:"test",rawName:"v-test:totpSubmit",arg:"totpSubmit"}],staticClass:"button button--primary button--full-width form-field",attrs:{loading:t.isBusy.authenticatingUsingTotp,type:"submit"}},[e("translate",[t._v("Log in")])],1)],1)])])},I=[],O=a("1d41"),P=a("2f62"),L=h["a"].extend({name:"TotpForm",components:{InputField:y["a"],LoadingButton:u["a"],Icon:c["a"]},mixins:[C["b"]],props:{email:{type:String,required:!0},password:{type:String,required:!0}},data(){return{TOTPToken:"",TOTPError:"",showLoginError:!1}},computed:{authenticationCodeText(){return this.$gettext("Authentication code")}},watch:{TOTPToken(){this.TOTPError=""}},methods:{...Object(P["b"])("authentication",["totp"]),onTOTPSubmit:Object(C["a"])("authenticatingUsingTotp",(function(){return this.showLoginError=!1,this.totp({email:this.email,password:this.password,token:this.TOTPToken}).then(({user:t})=>{t.totp_enabled?this.$emit("processUserLogin",t.login_count):this.$router.push({name:O["MAIL"],query:{modal:"totp-disabled-warning"}})}).catch(t=>{const e=Object(o["a"])(t);if(e!==r["G"])throw this.showLoginError=!0,t;this.TOTPError=this.$gettext("Incorrect one-time code")})}))}}),S=L,U=Object(f["a"])(S,E,I,!1,null,null,null),B=U.exports;const R="sm-username",$=2,F=1,N=0,A=1;var j=h["a"].extend({components:{AuthenticationLayout:l["a"],Checkbox:w["a"],Icon:c["a"],InputField:y["a"],LoadingButton:u["a"],PasswordField:d["a"],TotpForm:B,StatusBanner:_},mixins:[C["b"]],data(){return{username:["development","test"].includes("production")?"dev@local.startmail.org":"",password:["development","test"].includes("production")?"gesundheit":"",loginError:"",showLoginError:!1,step:N,STEP_LOGIN_FORM:N,STEP_TOTP_FORM:A,FEATURE_RECOVERY:T["FEATURE_RECOVERY"],FEATURE_SIGNUP:T["FEATURE_SIGNUP"],rememberUsername:!1,validateInput:!1,userNameError:"",loginCount:3,fromSessionExpired:null===this.$route.query["session-expired"],backgroundImage:a("4125"),is_manager:!1}},computed:{authenticationCodeText(){return this.$gettext("Authentication code")},blogLink(){return this.$gettext("https://www.startmail.com/blog/")},passwordText(){return this.$gettext("Password")},passwordRecoveryRoute(){return{name:O["PASSWORD_RECOVERY_INITIATE"],params:{email:this.username}}},rememberUsernameLabel(){return this.$gettext("Remember my email address")},signupUrl(){return this.$gettext("https://www.startmail.com/signup/")},usernameText(){return this.$gettext("Email address")},usernameValidationErrorMessage(){return this.$gettext("Email address is required.")}},watch:{username(){this.loginError=""},password(){this.loginError=""}},async created(){const t=await Object(x["a"])(R);t&&(this.rememberUsername=!0,this.username=t)},methods:{...Object(P["b"])("authentication",["login"]),onUsernameBlur(){this.username=Object(k["a"])(this.username)},onFormSubmit:Object(C["a"])("authenticating",(async function(t){if(this.showLoginError=!1,this.username=Object(k["a"])(this.username),this.validateInput=!0,t.target.checkValidity())return this.rememberUsername?await Object(x["c"])(R,this.username):await Object(x["b"])(R),this.login({email:this.username,password:this.password}).then(({user:t})=>{this.is_manager=t.is_manager,t.totp_enabled?this.step=A:this.processUserLogin(t.login_count)}).catch(t=>{const e=Object(o["a"])(t);if(e!==r["g"])throw this.showLoginError=!0,t;this.loginError=this.$gettext("Email address and password do not match"),window.setTimeout(()=>{this.$refs.password.focus()},0)})})),reRoute(){this.is_manager||this.loginCount!==F?this.loginCount===$?this.showUpdateRecoveryModal():this.$router.push({name:O["MAIL"]}):this.$router.push({name:O["MAIL"],query:{modal:"welcome-team-account"}})},processUserLogin(t){this.loginCount=t,this.reRoute()},showUpdateRecoveryModal(){i["c"].recovery.getRecoveryStatus().then(t=>{t.recovery_address_confirmed?this.$router.push({name:O["MAIL"]}):this.$router.push({name:O["MAIL"],query:{modal:"update-recovery"}})}).catch(t=>{throw this.$router.push({name:O["MAIL"]}),t})}}}),M=j,q=(a("0c45"),Object(f["a"])(M,s,n,!1,null,null,null));e["default"]=q.exports},b0a2:function(t,e,a){},c662:function(t,e,a){},d1f6:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"authentication",class:{"background-bottom-left":"bottom-left"===t.backgroundImagePosition,"background-bottom-right":"bottom-right"===t.backgroundImagePosition},style:{"--background-image-url":`url(${t.backgroundImage})`}},[e("div",{staticClass:"authentication__outer scroll-to"},[e("div",{staticClass:"authentication__before-top spacing-bottom"},[t._t("before-top")],2),e("div",{staticClass:"authentication__inner-wrapper"},[e("div",{staticClass:"authentication__before"},[t._t("before")],2),t.empty?[t._t("default")]:e("div",{directives:[{name:"test",rawName:"v-test:authenticationBox",arg:"authenticationBox"}],staticClass:"authentication__inner",class:{"authentication__inner--wide":t.wide}},[e("Logo",{staticClass:"authentication__logo",attrs:{big:""}}),t._t("default")],2),e("div",{staticClass:"authentication__after"},[t._t("after")],2)],2),e("div",{staticClass:"authentication__after-bottom"},[t._t("after-bottom")],2)])])},n=[],i=a("2b0e"),r=a("e532"),o=i["a"].extend({components:{Logo:r["a"]},props:{empty:{type:Boolean,default:!1},backgroundImage:{type:[String,Object],default:()=>a("4ca4")},backgroundImagePosition:{type:String,default:"bottom-right",validator:t=>["bottom-left","bottom-center","bottom-right"].includes(t)},wide:{type:Boolean,default:!1,required:!1}},created(){const t=document.querySelector(".scroll-to");t&&t.scrollTo(0,1)}}),l=o,c=(a("98cf"),a("2877")),u=Object(c["a"])(l,s,n,!1,null,null,null);e["a"]=u.exports},d91c:function(t,e,a){"use strict";a("45a8")},f169:function(t,e,a){}}]);
//# sourceMappingURL=LoginPage.8ef47ed8.js.map
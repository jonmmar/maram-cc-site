try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="04ab2347-1b15-4699-b7d7-48d27439c15c",e._sentryDebugIdIdentifier="sentry-dbid-04ab2347-1b15-4699-b7d7-48d27439c15c")}catch(e){}{let e="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{};e.SENTRY_RELEASE={id:"5.12.0"}}(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mail"],{"075f":function(e,t,s){},"0a67":function(e,t,s){"use strict";s("5aa7")},"0a9b":function(e,t,s){"use strict";s.r(t);s("5377");var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.state.loading?t("p",{key:"loadingMessage-"+e.state.loading,staticClass:"panel-user-message"},[t("translate",[e._v("Loading message…")])],1):e.state.error?t("ErrorView",{attrs:{"error-type":e.state.error}}):e.activeMessage?t("section",{staticClass:"message-wrapper"},[t("SwipeNavigation",{staticClass:"panel",on:{swipeRight:function(t){return e.$root.$emit("readMessageInCurrentView",e.previousMessageId)},swipeLeft:function(t){return e.$root.$emit("readMessageInCurrentView",e.nextMessageId)}}},[t("Message",{attrs:{message:e.activeMessage,"attachments-download-link":e.downloadAllFilesUrl,"show-external-images":e.showExternalImages,"external-link-warning":e.preferences.external_link_warning,"show-badge-dropdown":!0,"display-formats":e.displayFormats,"dark-mode":e.darkMode},on:{mailToClicked:e.onMailToClicked,showExternalImages:e.onClickShowExternalImages},scopedSlots:e._u([{key:"actions",fn:function(){return[t("div",{staticClass:"action-bar__row"},[t("div",{staticClass:"action-bar__row-left"},[t("div",{staticClass:"action-bar__group"},[t("Dropdown",{directives:[{name:"test",rawName:"v-test:replyForwardDropdown",arg:"replyForwardDropdown"}],staticClass:"message__small-screen-only dropdown--align-left",scopedSlots:e._u([{key:"button",fn:function({isOpen:e,toggle:s}){return[t("ActionBarButton",{attrs:{dropdown:!0,active:e,icon:"reply"},on:{click:s}})]}},{key:"content",fn:function({toggle:s}){return[t("ul",{staticClass:"link-list",on:{click:s}},[t("li",[t("button",{directives:[{name:"test",rawName:"v-test:replyButton",arg:"replyButton"}],staticClass:"button button--clean link-list__item",attrs:{type:"button"},on:{click:e.replyClicked}},[e._v(" "+e._s(e.replyText)+" ")])]),t("li",[t("button",{staticClass:"button button--clean link-list__item",attrs:{type:"button"},on:{click:e.replyAllClicked}},[e._v(" "+e._s(e.replyToAllText)+" ")])]),t("li",[t("button",{directives:[{name:"test",rawName:"v-test:forwardButton",arg:"forwardButton"}],staticClass:"button button--clean link-list__item",attrs:{type:"button"},on:{click:e.forwardClicked}},[e._v(" "+e._s(e.forwardText)+" ")])])])]}}])}),t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:replyButton",arg:"replyButton"}],staticClass:"message__large-screen-only button--subtle button--small",attrs:{label:e.replyText,title:e.replyText,icon:"reply"},on:{click:e.replyClicked}}),t("ActionBarButton",{staticClass:"message__large-screen-only button--subtle button--small",attrs:{label:e.replyToAllText,title:e.replyToAllText,icon:"reply-all"},on:{click:e.replyAllClicked}}),t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:forwardButton",arg:"forwardButton"}],staticClass:"message__large-screen-only button--subtle button--small",attrs:{label:e.forwardText,title:e.forwardText,icon:"forward"},on:{click:e.forwardClicked}})],1),t("div",{staticClass:"action-bar__group"},[t("MoveToFolderModal",{attrs:{"busy-moving":e.isBusy.moving},on:{moveToFolder:e.onMoveMessage}}),e.isSpamMessage?t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:markAsNotSpam",arg:"markAsNotSpam"},{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.markAsNotSpamButtonText},expression:"{\n                  position: 'bottom',\n                  content: markAsNotSpamButtonText,\n                }"}],staticClass:"button--subtle button--small",attrs:{icon:"not-spam"},on:{click:e.markAsNotSpamClicked}}):t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:markAsSpam",arg:"markAsSpam"},{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.markAsSpamButtonText},expression:"{\n                  position: 'bottom',\n                  content: markAsSpamButtonText,\n                }"}],staticClass:"button--subtle button--small",attrs:{icon:"spam"},on:{click:e.markAsSpamClicked}}),"trash"===e.activeFolder.type?t("DeleteConfirmationModal",{attrs:{"ok-button-text":e.deleteMessageText,"warning-text":e.deleteWarningText},on:{delete:e.onDeleteClicked},scopedSlots:e._u([{key:"DeleteButton",fn:function(s){return[t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.deleteMessageText},expression:"{\n                      position: 'bottom',\n                      content: deleteMessageText,\n                    }"}],staticClass:"button--subtle button--small",attrs:{icon:"trash"},on:{click:s.toggle}})]}}],null,!1,35839639)}):t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.moveToTrashText},expression:"{ position: 'bottom', content: moveToTrashText }"}],staticClass:"button--subtle button--small",attrs:{icon:"trash"},on:{click:e.onTrashClicked}}),t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:markAsUnreadButton",arg:"markAsUnreadButton"},{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.markAsUnreadText},expression:"{ position: 'bottom', content: markAsUnreadText }"}],staticClass:"button--subtle button--small",attrs:{icon:"unread",disabled:e.isBusy.markingAsUnread},on:{click:e.markAsUnreadClick}}),t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.toggleMessageFlaggedDisplayValue},expression:"{\n                  position: 'bottom',\n                  content: toggleMessageFlaggedDisplayValue,\n                }"}],staticClass:"button--subtle button--small",attrs:{active:e.activeMessage.flagged,icon:"flag"},on:{click:e.toggleMessageFlaggedClicked}})],1),t("div",{staticClass:"action-bar__group"},[t("Dropdown",{directives:[{name:"test",rawName:"v-test:secondaryActionsDropdown",arg:"secondaryActionsDropdown"}],scopedSlots:e._u([{key:"button",fn:function({isOpen:s,toggle:a}){return[t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.moreText,disabled:s},expression:"{\n                      position: 'bottom',\n                      content: moreText,\n                      disabled: isOpen,\n                    }"}],staticClass:"button--subtle button--small",attrs:{active:s,icon:"menu-horizontal"},on:{click:a}})]}},{key:"content",fn:function({toggle:s}){return[t("ul",{staticClass:"link-list",on:{click:s}},[t("li",[t("a",{directives:[{name:"test",rawName:"v-test:viewSourceButton",arg:"viewSourceButton"}],staticClass:"button button--subtle link-list__item",attrs:{href:e.messageSourceUrl,target:"_blank"}},[t("translate",[e._v("View source")])],1)]),e.showPrintButton?t("li",{staticClass:"message-wrapper__print-button"},[t("button",{directives:[{name:"test",rawName:"v-test:printButton",arg:"printButton"}],staticClass:"button button--subtle link-list__item",attrs:{type:"button"},on:{click:e.onPrintClick}},[t("translate",[e._v("Print")])],1)]):e._e(),t("li",[t("BlockSenderModal",{attrs:{sender:e.activeMessage.from&&e.activeMessage.from.email}})],1),t("li",[t("MessageReportingDialog",{on:{submit:e.reportMessageConfirmed},scopedSlots:e._u([{key:"button",fn:function({showModal:s}){return[t("button",{directives:[{name:"test",rawName:"v-test:report-message-button",arg:"report-message-button"}],staticClass:"button button--subtle link-list__item",attrs:{type:"button"},on:{click:s}},[t("translate",[e._v("Report message")])],1)]}}],null,!0)})],1)])]}}])})],1)]),t("div",{staticClass:"action-bar__row-right message__large-screen-only"},[t("div",{staticClass:"action-bar__group"},[-1!==e.activeMessageIndex?t("div",{staticClass:"action-bar__group"},[t("div",{staticClass:"action-bar__group"},[t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.previousMessageText},expression:"{\n                      position: 'bottom',\n                      content: previousMessageText,\n                    }"},{name:"test",rawName:"v-test:previousMessageButton",arg:"previousMessageButton"}],attrs:{title:e.previousMessageText,icon:"arrow-left",disabled:!e.previousMessageId},on:{click:function(t){return e.$root.$emit("readMessageInCurrentView",e.previousMessageId)}}}),t("span",{domProps:{textContent:e._s(e.paginationText)}}),t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:nextMessageButton",arg:"nextMessageButton"},{name:"tooltip",rawName:"v-tooltip",value:{position:"bottom",content:e.nextMessageText},expression:"{\n                      position: 'bottom',\n                      content: nextMessageText,\n                    }"}],attrs:{icon:"arrow-right",disabled:!e.nextMessageId},on:{click:function(t){return e.$root.$emit("readMessageInCurrentView",e.nextMessageId)}}})],1)]):e._e()])])])]},proxy:!0},e.activeMessage.flags.is_encrypted||e.activeMessage.flags.is_signed?{key:"top",fn:function({messageDecryptionStatus:s}){return[t("MessageStatus",{attrs:{encrypted:e.activeMessage.flags.is_encrypted,signed:e.activeMessage.flags.is_signed,"erroneous-signatures":e.erroneousSignatures,"message-decryption-status":s,"pgp-keys":e.activeMessage.pgp&&e.activeMessage.pgp.encryption.recipient_keys}})]}}:null],null,!0)})],1)],1):t("p",{staticClass:"panel-user-message"},[t("translate",[e._v("Message does not exist.")])],1)},i=[],n=(s("14d9"),s("2b0e")),r=s("8a60"),o=s.n(r),l=s("2f62"),c=s("c6e6"),d=s("d379"),u=s("10db"),g=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Modal",{attrs:{"include-in-render-tree":!1},scopedSlots:e._u([{key:"toggle",fn:function({toggle:s}){return[t("button",{staticClass:"button button--subtle link-list__item",attrs:{type:"button",disabled:!e.sender||!e.sender.trim()},on:{click:s}},[t("translate",[e._v("Block sender")])],1)]}},{key:"header",fn:function(){return[t("translate",[e._v("Block messages from this sender?")])]},proxy:!0},{key:"content",fn:function({toggle:s}){return[t("div",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-params":"{ sender, filterRoute }"}},[e._v(" Do you want to block new messages from %{ sender } ?"),t("br"),e._v(" This will create a filter rule that will discard messages from that address. If you change your mind later on, you can remove it using the "),t("a",{attrs:{href:"%{ filterRoute }"}},[e._v("filters management")]),e._v(" page. ")]),t("ModalConfirmActions",{attrs:{"ok-text":e.blockText},on:{cancelClicked:s,okClicked:function(t){s(),e.blockSender()}}})]}}])})},m=[],h=s("79f6"),p=s("714b"),f=s("b2fa"),y=s("1d41");const v=e=>({test_combinator:"all",tests:[{source:"headers",headers:["from"],match:"contains",values:[e]}],actions:[{action:"delete"}]}),b=(e,t)=>{if("all"===e.test_combinator&&1===e.tests.length&&1===e.actions.length){const{tests:[s],actions:[a]}=e;return"headers"==s.source&&1===s.headers.length&&"from"==s.headers[0]&&"contains"==s.match&&1==s.values.length&&s.values[0]==t&&"delete"==a.action}return!1};var x=n["a"].extend({name:"BlockSenderModal",components:{Modal:p["a"],ModalConfirmActions:f["a"]},props:{sender:{type:String,required:!1,default:""}},computed:{blockText(){return this.$gettext("Block")},filterRoute(){return this.$router.resolve({name:y["SETTINGS_MAIL_FILTERS"]}).href}},methods:{...Object(l["b"])(["setToastMessage"]),async blockSender(){let e,t;try{({entity_tag:e,filters:t}=await h["c"].filters.get())}catch(a){throw this.setToastMessage({message:this.$gettext("Something went wrong loading filters. Please try again later.")}),a}const s=t.some(e=>b(e,this.sender));if(s)this.setToastMessage({message:this.$gettext("Sender already blocked")});else{t.unshift(v(this.sender));try{await h["c"].filters.update({filters:t,entity_tag:e})}catch(a){throw this.setToastMessage({message:this.$gettext("Something went wrong updating filters. Please try again later.")}),a}this.setToastMessage({message:this.$gettext("Sender blocked")})}}}}),_=x,w=s("2877"),M=Object(w["a"])(_,g,m,!1,null,null,null),k=M.exports,S=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DefaultDialog",{attrs:{closable:!e.loading},scopedSlots:e._u([{key:"showModal",fn:function(t){return[e._t("button",null,null,t)]}},{key:"header",fn:function(){return[t("translate",[e._v("Report message?")])]},proxy:!0},{key:"default",fn:function({close:s}){return[t("form",{attrs:{method:"dialog"},on:{submit:function(t){return t.preventDefault(),e.submit(t,s)}}},[t("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v(" Use this form to report a problematic message to the StartMail support team for further investigation. ")]),t("div",{staticClass:"form-field"},[t("SelectInput",{attrs:{id:"message-report-type-select-"+e.uid,name:"report-type",placeholder:e.reportTypePlaceholder,label:e.reportTypeLabel,options:e.reportTypeOptions,required:""},model:{value:e.reportType,callback:function(t){e.reportType=t},expression:"reportType"}})],1),e.reportType==e.MessageReportType.phishing?[t("p",{directives:[{name:"translate",rawName:"v-translate"}],key:"explanation-"+e.reportType},[e._v(" This alerts the StartMail security team, then moves the message into your spam folder to train your personal spam filter. ")]),t("NotificationBlock",{staticClass:"notification-block",attrs:{variant:"warning"}},[t("p",[t("span",{domProps:{innerHTML:e._s(e.phishingExplanationHtml)}}),e._v(" "+e._s(" ")+" "),t("SupportCenterLink",{attrs:{article:"360007455737"}},[t("translate",[e._v("Learn more about phishing.")])],1)],1)])]:e.reportType==e.MessageReportType.support?[t("p",{directives:[{name:"translate",rawName:"v-translate"}],key:"explanation-"+e.reportType},[e._v(" Please only use this option when the StartMail support team asked you to share a specific message. ")])]:e._e(),e.reportType?t("div",{staticClass:"form-field"},[t("Checkbox",{attrs:{name:"confirm",required:"",id:"message-report-type-confirm-"+e.uid,label:e.confirmLabel}})],1):e._e(),t("div",{staticClass:"actions"},[t("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button button--accent",attrs:{type:"button",disabled:e.loading},on:{click:s}},[e._v(" Cancel ")]),t("LoadingButton",{staticClass:"button button--primary",attrs:{type:"submit",loading:e.loading}},[e._v(" "+e._s(e.submitButtonLabel)+" ")])],1)],2)]}}],null,!0)})},C=[],$=s("8017"),T=s("82ff"),I=s("d05f"),A=s("8e8d"),B=s("27a3"),P=s("7b0c"),F=s("ac4b"),E=n["a"].extend({components:{Checkbox:T["a"],DefaultDialog:I["a"],LoadingButton:A["a"],NotificationBlock:B["a"],SelectInput:P["a"],SupportCenterLink:F["a"]},data(){return{loading:!1,MessageReportType:h["b"],uid:this._uid.toString(),reportType:""}},computed:{...Object(l["c"])("features",["featureById"]),confirmLabel(){return this.$pgettext("report-message","By proceeding, I authorize the StartMail team to access the contents of this message.")},phishingExplanationHtml(){return this.$gettext("<strong>Only use this to report phishing mails.</strong> For regular spam, please use the ‘Mark message as spam’ button instead.")},reportTypeLabel(){return this.$pgettext("report-message-report-type","Report type")},reportTypePlaceholder(){return this.$pgettext("report-message-report-type","Select a report type")},reportTypeOptions(){var e;const t=[{name:this.$pgettext("report-message-report-type","Phishing"),value:h["b"].phishing}],s=null===(e=this.featureById($["FEATURE_MESSAGE_REPORTING"]))||void 0===e?void 0:e.enabled;return s&&t.push({name:this.$pgettext("report-message-report-type","Other (share with support)"),value:h["b"].support}),t},submitButtonLabel(){switch(this.reportType){case h["b"].phishing:return this.$pgettext("report-message-submit-button","Report as phishing");case h["b"].support:return this.$pgettext("report-message-submit-button","Share with support");default:return this.$pgettext("report-message-submit-button","Report")}}},methods:{async submit(e,t){this.loading=!0;try{await new Promise((e,t)=>{this.$emit("submit",{reportType:this.reportType,resolve:e,reject:t})})}finally{this.loading=!1,t()}}}}),L=E,O=(s("58de"),Object(w["a"])(L,S,C,!1,null,"71aec549",null)),D=O.exports,N=s("ad86"),R=s("0f7d"),j=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"message-status"},[t("div",{directives:[{name:"test",rawName:"v-test:messageStatus",arg:"messageStatus"}],staticClass:"message-status__information row"},[e.encrypted?t("Icon",{attrs:{symbol:"locked"}}):e._e(),e.signed?t("Icon",{attrs:{symbol:"signed"}}):e._e(),t("span",[t("span",{domProps:{innerHTML:e._s(e.statusText)}}),e._l(e.pgpKeys,(function(s,a){return[t("span",{key:a},[t("span",a?[e._v(e._s(", "))]:[e._v(e._s(` ${e.usingLabelText} `))]),t("span",[e._v(e._s(e.keyIdLabelText+" "))]),t("strong",[t("router-link",{directives:[{name:"test",rawName:"v-test:messageKeyLink",arg:"messageKeyLink"}],attrs:{to:{name:e.SETTINGS_PGP_KEYRING_KEY,params:{fingerprint:s.fingerprint,origin:"message"}}}},[t("span",{domProps:{textContent:e._s(""+s.key_id)}})])],1)])]}))],2)],1),e.messageDecryptionStatusText?t("div",{staticClass:"message-status__error row"},[t("Icon",{attrs:{symbol:"locked"}}),t("span",{domProps:{innerHTML:e._s(e.messageDecryptionStatusText)}})],1):e._e(),e.erroneousSignatures.length?t("div",{staticClass:"message-status__error row"},[t("Icon",{attrs:{symbol:"key-error"}}),t("div",{staticClass:"col"},e._l(e.erroneousSignatures,(function(s,a){return t("div",{key:a,staticClass:"col"},[e.signatureStatusError(s)?t("span",{domProps:{innerHTML:e._s(e.signatureStatusError(s))}}):e._e(),!1===s.matches_sender?t("span",{domProps:{innerHTML:e._s(e.senderDoesNotMatchError)}}):e._e(),!0===s.weak_algorithm?t("span",{domProps:{innerHTML:e._s(e.weakAlgorithmError)}}):e._e()])})),0)],1):e._e()])},q=[],V=s("00a1"),G=s("9902"),Y=n["a"].extend({name:"MessageStatus",components:{Icon:V["a"]},data(){return{SETTINGS_PGP_KEYRING_KEY:y["SETTINGS_PGP_KEYRING_KEY"]}},props:{signed:{type:Boolean,required:!0},encrypted:{type:Boolean,required:!0},erroneousSignatures:{type:Array,required:!0},messageDecryptionStatus:{type:Number,required:!0},pgpKeys:{type:Array,default:()=>[]}},computed:{statusText(){return this.encrypted&&this.signed?this.$gettext("This email is <strong>PGP signed</strong> and <strong>PGP encrypted</strong>"):this.encrypted?this.$gettext("This email is <strong>PGP encrypted</strong>"):this.signed?this.$gettext("This email is <strong>PGP signed</strong>"):""},keyIdLabelText(){return this.$gettext("key id:")},usingLabelText(){return this.$gettext("using")},senderDoesNotMatchError(){return this.$gettext("<strong>Unexpected signer</strong>: the signer does not match the sender.")},weakAlgorithmError(){return this.$gettext("<strong>Weak signature</strong>: the signature uses a weak cryptographic algorithm.")},messageDecryptionStatusText(){switch(this.messageDecryptionStatus){case G["D"]:case G["B"]:return this.$gettext("You do not have the required key. Please contact the sender.");case G["w"]:return this.$gettext("The data is corrupted. Please contact the sender.");case G["y"]:return this.$gettext("An unknown error occurred. This email could not be decrypted.");default:return null}}},methods:{signatureStatusError(e){switch(e.status){case G["v"]:return this.$gettext("<strong>Invalid signature</strong>: the signature does not match the message.");case G["F"]:return this.$gettext("<strong>Invalid signature</strong>: the signature has expired.");case G["z"]:return this.$gettext("<strong>Invalid signature</strong>: the key of the signer has expired.");case G["C"]:return this.$gettext("<strong>Invalid signature</strong>: key of the signer has been revoked.");case G["B"]:return this.$gettext("<strong>Unverifiable signature</strong>: you do not have the public key of the signer.");case G["y"]:return this.$gettext("<strong>Unverifiable signature</strong>: there was an unexpected error.");default:return""}}}}),U=Y,z=(s("6847"),Object(w["a"])(U,j,q,!1,null,null,null)),H=z.exports,W=s("44b9"),K=function(){var e=this,t=e._self._c;return t("div",{staticClass:"swipe-navigation",style:e.swipeStyle},[e._t("default")],2)},X=[];const Q=/(auto|scroll)/;function J(e){const{overflow:t,overflowX:s,overflowY:a}=window.getComputedStyle(e);return Q.test(""+t+s+a)?e:Z(e)}function Z(e){const t=window.getComputedStyle(e),s="absolute"===t.position;if("fixed"===t.position)return document.body;for(let a=e;a=a.parentElement;){const{position:e,overflow:t,overflowX:i,overflowY:n}=window.getComputedStyle(a);if((!s||"static"!==e)&&Q.test(""+t+n+i))return a}return document.body}var ee={data(){return{animating:!1,clientX:0,startingPositionX:null,startingPositionY:null,swipingCanceled:!1,swipeDirection:null}},computed:{swipeStyle(){return!this.animating&&this.clientX?{transform:`translateX(${this.clientX}px)`,transition:"none"}:{transition:"transform 100ms ease-out"}}},mounted(){this.$el.addEventListener("touchstart",this.onTouchStart),this.$el.addEventListener("touchmove",this.onTouchMove),this.$el.addEventListener("touchend",this.onTouchEnd)},beforeDestroy(){this.$el.removeEventListener("touchstart",this.onTouchStart),this.$el.removeEventListener("touchmove",this.onTouchMove),this.$el.removeEventListener("touchend",this.onTouchEnd)},methods:{viewportZoomed(){return window.visualViewport?window.visualViewport.scale>1:!!window.screen.width&&window.screen.width/window.innerWidth>1},onTouchStart(e){this.animating=!1,this.startingPositionX=e.touches[0].clientX,this.startingPositionY=e.touches[0].clientY},onTouchMove(e){if(this.swipingCanceled)return;if(e.touches.length>1||this.viewportZoomed())return void(this.swipingCanceled=!0);const{clientX:t,clientY:s}=e.touches[0],a=t-this.startingPositionX,i=s-this.startingPositionY;if(!this.swipeDirection){if(this.swipeDirection=Math.abs(i)>Math.abs(a)?i<0?"down":"up":a<0?"right":"left","up"===this.swipeDirection||"down"===this.swipeDirection)return void(this.swipingCanceled=!0);const t=J(e.target),s=t.offsetWidth,n=t.scrollWidth,r=t.scrollLeft,o=s-(n-r);if("right"===this.swipeDirection&&0!==o||"left"===this.swipeDirection&&0!==r)return void(this.swipingCanceled=!0)}e.preventDefault(),window.requestAnimationFrame(()=>{this.clientX=a})},onTouchEnd(e){if(this.swipeDirection&&!this.swipingCanceled){e.preventDefault();const t=.2*document.documentElement.clientWidth,{clientX:s}=e.changedTouches[0];s<this.startingPositionX-t?this.$emit("swipeLeft"):s>this.startingPositionX+t&&this.$emit("swipeRight")}this.swipingCanceled=!1,this.swipeDirection=null,window.requestAnimationFrame(()=>{this.clientX=0,this.animating=!0})}}},te=ee,se=Object(w["a"])(te,K,X,!1,null,null,null),ae=se.exports,ie=s("410b"),ne=s("76da"),re=s("34f1"),oe=s("5488"),le=s("8d8d"),ce=s("634d");const de=0;var ue=n["a"].extend({name:"MessageWrapper",components:{Dropdown:N["a"],DeleteConfirmationModal:u["a"],MoveToFolderModal:W["a"],ActionBarButton:d["a"],Message:R["a"],MessageStatus:H,BlockSenderModal:k,MessageReportingDialog:D,SwipeNavigation:ae,ErrorView:ie["b"]},mixins:[ne["f"],oe["a"],re["b"]],data(){return{state:{loading:!0},showExternalImages:!1,showPrintButton:!!window.print}},computed:{...Object(l["e"])({activeMessageId:e=>e.messages.activeMessageId,paginationTotal:e=>e.pagination.total,darkMode:e=>e.settings.darkMode,preferences:e=>e.authentication.user.preferences}),...Object(l["c"])(["activeFolder","activeMessageIndex","activeMessage","folderById","nextMessageId","previousMessageId"]),toggleMessageFlaggedDisplayValue(){return this.activeMessage.flagged?this.$gettext("Unflag message"):this.$gettext("Flag message")},moveToTrashText(){return this.$gettext("Move message to Trash")},deleteMessageText(){return this.$gettext("Delete message")},deleteWarningText(){return this.$gettext("The selected message will be permanently deleted. It is not possible to undo this action.")},displayFormats(){return{date:Object(ce["c"])(this.preferences.date_format),time:Object(ce["d"])(this.preferences.time_format)}},markAsUnreadText(){return this.$gettext("Mark as unread")},forwardText(){return this.$pgettext("action button label","Forward")},replyToAllText(){return this.$pgettext("action button label","Reply all")},replyText(){return this.$pgettext("action button label","Reply")},markAsSpamButtonText(){return this.$gettext("Mark message as spam")},markAsNotSpamButtonText(){return this.$gettext("Mark message as not spam")},nextMessageText(){return this.$pgettext("message","Older")},previousMessageText(){return this.$pgettext("message","Newer")},messageSourceUrl(){return c["MESSAGE_SOURCE_ENDPOINT"](this.activeMessage.id)},downloadAllFilesUrl(){let e;return"string"===typeof this.activeMessage.subject&&(e=this.activeMessage.subject.replace(/[\W_]+/g,"").toLowerCase()),c["DOWNLOAD_FILES_ENDPOINT"](this.activeMessage.id,e||this.$gettext("attachments"))},activeMessageNumberInList(){return this.$store.getters["pagination/pageStart"]+this.activeMessageIndex},isSpamMessage(){const e=this.folderById(this.activeMessage.folder_id);return e&&"junk"===e.type},erroneousSignatures(){var e;return null===(e=this.activeMessage.pgp)||void 0===e?void 0:e.signatures.filter(e=>e.status!==de||!1===e.matches_sender||!0===e.weak_algorithm)},moreText(){return this.$gettext("More")},paginationText(){return this.$gettextInterpolate(this.$pgettext("message pagination","%{ current } of %{total}"),{current:this.activeMessageNumberInList,total:this.paginationTotal})}},watch:{$route(e){this.resetState(),this.setActiveMessage({id:e.params.message||e.query.message}),this.readMessage({id:this.activeMessageId}).then(({show_external_images:e})=>{this.state={loading:!1},this.showExternalImages=Boolean(e)}).catch(e=>{throw this.state={loading:!1,error:ie["a"].MessageNotFound},e})}},created(){this.setActiveMessage({id:this.$route.params.message||this.$route.query.message}),this.readMessage({id:this.activeMessageId}).then(({show_external_images:e})=>{this.state={loading:!1},this.showExternalImages=Boolean(e)}).catch(e=>{throw this.state={loading:!1,error:ie["a"].MessageNotFound},e}),this.$root.$on("setExternalLinkWarning",this.setExternalLinkWarning),o.a.bind("r",this.replyClicked),o.a.bind("g",this.replyAllClicked),o.a.bind("f",this.forwardClicked),o.a.bind(["d","del","backspace"],this.onTrashClicked),o.a.bind(["right","l","]"],()=>this.$root.$emit("readMessageInCurrentView",this.nextMessageId)),o.a.bind(["left","h","["],()=>this.$root.$emit("readMessageInCurrentView",this.previousMessageId))},destroyed(){o.a.unbind(["r","g","f","d","del","backspace","right","l","]","left","h","["]),this.$root.$off("setExternalLinkWarning",this.setExternalLinkWarning)},methods:{...Object(l["b"])(["changeMessagesReadStatus","changeMessagesFlagStatus","loadMessages","markMessagesAsSpam","markMessagesAsNotSpam","moveMessagesToFolder","moveMessagesToTrash","readMessage","deleteMessage","setToastMessage","setExternalLinkWarning","reportMessage"]),...Object(l["d"])({setActiveMessage:le["a"]}),onPrintClick(){window.print()},reportMessageConfirmed:Object(re["a"])("reportMessage",(async function({reportType:e,resolve:t,reject:s}){this.updateRoute();let a="";try{switch(await this.reportMessage({messageId:this.activeMessage.id,reportType:e}),t(),e){case h["b"].phishing:a=this.$gettext("Message reported as phishing and moved to spam folder.");break;case h["b"].support:a=this.$gettext("Message reported to the support team.");break}}catch(i){a=this.$gettext("Sorry, the message could not be reported. Please try again later."),s(i)}finally{this.setToastMessage({message:a}),this.loadMessages()}})),onMoveMessage:Object(re["a"])("moving",(function(e,t){t.toggle();const s=this.folderById(e),a=this.getFolderName(s),i=this.activeMessage.id;return this.updateRoute(),this.moveMessagesToFolder({messagesIds:[i],folderId:e}).then(()=>{const e=this.$gettextInterpolate(this.$gettext("Message moved to %{ folderName }"),{folderName:a},!0);this.setToastMessage({message:e}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("We could not move this message")}),this.loadMessages()})})),replyClicked(){this.$router.push({name:y["MAIL_COMPOSE"],query:{...this.$route.query,inReplyTo:this.activeMessage.id,fromFCC:!0===this.activeMessage.is_fcc?"true":"false",encrypt:!0===this.activeMessage.flags.is_encrypted?"true":"false",folder:this.activeFolder.id}})},replyAllClicked(){this.$router.push({name:y["MAIL_COMPOSE"],query:{...this.$route.query,inReplyToAll:this.activeMessage.id,fromFCC:!0===this.activeMessage.is_fcc?"true":"false",encrypt:!0===this.activeMessage.flags.is_encrypted?"true":"false",folder:this.activeFolder.id}})},forwardClicked(){this.$router.push({name:y["MAIL_COMPOSE"],query:{...this.$route.query,forwardFrom:this.activeMessage.id,fromFCC:!0===this.activeMessage.is_fcc?"true":"false",encrypt:!0===this.activeMessage.flags.is_encrypted?"true":"false",folder:this.activeFolder.id}})},markAsSpamClicked:Object(re["a"])("markingAsSpam",(function(){const e=this.activeMessage.id;return this.updateRoute(),this.markMessagesAsSpam({messagesIds:[e]}).then(()=>{this.setToastMessage({message:this.$gettext("Message marked as spam")}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not mark your message as spam")}),this.loadMessages()})})),markAsNotSpamClicked:Object(re["a"])("markingAsNotSpam",(function(){const e=this.activeMessage.id;return this.updateRoute(),this.markMessagesAsNotSpam({messagesIds:[e]}).then(()=>{this.setToastMessage({message:this.$gettext("Message marked as not spam")}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not mark your message as not spam")}),this.loadMessages()})})),markAsUnreadClick:Object(re["a"])("markingAsUnread",(function(){return this.changeMessagesReadStatus({messagesIds:[this.activeMessage.id],unread:!0}).then(()=>{this.setToastMessage({message:this.$gettext("Message marked as unread")})}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not mark your message as unread")}),this.loadMessages()})})),toggleMessageFlaggedClicked:Object(re["a"])("flagging",(function(){return this.changeMessagesFlagStatus({messagesIds:[this.activeMessage.id],flagged:!this.activeMessage.flagged}).catch(()=>{const e=this.activeMessage.flagged?this.$gettext("Sorry, could not unflag message"):this.$gettext("Sorry, could not flag message");this.setToastMessage({message:e}),this.loadMessages()})})),onDeleteClicked:Object(re["a"])("deleting",(function(){const e=this.activeMessage.id;return this.updateRoute(),this.deleteMessage({messageId:e}).then(()=>{this.setToastMessage({message:this.$gettext("Message has been deleted")}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not delete your message")}),this.loadMessages()})})),onTrashClicked:Object(re["a"])("trashing",(function(){const e=this.activeMessage.id;return this.updateRoute(),this.moveMessagesToTrash({messagesIds:[e]}).then(()=>{this.setToastMessage({message:this.$gettext("Message moved to Trash")}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not trash your message")}),this.loadMessages()})})),onMailToClicked([e,t]){this.$router.push({name:y["MAIL_COMPOSE"],query:{mailTo:e,subject:t}})},onClickShowExternalImages(){this.showExternalImages=!0},updateRoute(){if(this.$route.name===y["MAIL_MESSAGE"]){const{message:e,...t}=this.$route.query;this.$router.replace({name:y["MAIL_FOLDER"],query:t})}else if(this.$route.name===y["MAIL_FOLDER"]){const{message:e,...t}=this.$route.query;e&&this.$router.replace({...this.$route,query:t})}else if(this.$route.name===y["MAIL_SEARCH"]){const{message:e,...t}=this.$route.query,s=this.$route.params.folder;this.$router.replace({name:y["MAIL_SEARCH"],params:{folder:s,message:this.activeMessage.id},query:t})}},resetState(){this.state={loading:!0},this.showExternalImages=!1}}}),ge=ue,me=(s("7978"),Object(w["a"])(ge,a,i,!1,null,null,null));t["default"]=me.exports},"0d8c":function(e,t,s){e.exports=s.p+"img/empty-state-search.6bffdec0.svg"},"0f7d":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("article",{staticClass:"message panel__section"},[t("section",{staticClass:"action-bar panel__section-item panel__section-item--no-padding"},[e._t("actions")],2),t("section",{staticClass:"info panel__section-item"},[t("header",[t("h1",{directives:[{name:"test",rawName:"v-test:subject",arg:"subject"}],domProps:{textContent:e._s(e.message.subject)}}),t("div",{staticClass:"attachments-and-date"},[e.attachments.length?t("Dropdown",{staticClass:"dropdown--align-left",scopedSlots:e._u([{key:"button",fn:function(s){return[t("button",{staticClass:"button--clean attachments",attrs:{type:"button","aria-label":e.attachmentsButtonLabel},on:{click:s.toggle}},[t("Icon",{attrs:{symbol:"attach",role:"presentation"}}),e._v(" "+e._s(e.attachmentsButtonLabel)+" "),t("Icon",{staticClass:"arrow",attrs:{symbol:"arrow-down"}})],1)]}},{key:"content",fn:function(s){return[t("ul",{staticClass:"link-list attachments"},[e.attachments.length>1&&e.attachmentsDownloadLink?t("li",{staticClass:"download-all"},[t("DownloadLink",{staticClass:"link-list__item",attrs:{url:e.attachmentsDownloadLink},on:{done:s.toggle}},[t("Icon",{attrs:{symbol:"download"}}),t("translate",[e._v("Download all")])],1)],1):e._e(),e._l(e.attachments,(function(a,i){return t("li",{key:a.id,class:{separated:0===i}},[t("DownloadLink",{staticClass:"link-list__item",attrs:{url:a.url,filename:a.filename},on:{done:s.toggle}},[t("Icon",{attrs:{symbol:"file"}}),t("span",{staticClass:"filename",domProps:{textContent:e._s(a.filename)}}),t("span",[e._v("("+e._s(e._f("formatDataSize")(a.size))+")")])],1)],1)}))],2)]}}],null,!1,1393910197)}):e._e(),t("time",{attrs:{datetime:e.message.date},domProps:{textContent:e._s(e.relativeDate)}})],1)]),t("dl",[t("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("From:")]),t("dd",{staticClass:"addresses"},[t("RecipientBadge",{directives:[{name:"test",rawName:"v-test:from",arg:"from"}],attrs:{official:e.message.official,"show-badge-dropdown":e.showBadgeDropdown,value:e.message.from}})],1),t("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("To:")]),t("dd",{staticClass:"addresses"},e._l(e.message.to,(function(s,a){return t("RecipientBadge",{directives:[{name:"test",rawName:"v-test:to",arg:"to"}],key:a,attrs:{"hide-email":!0,"show-badge-dropdown":e.showBadgeDropdown,value:s}})})),1),e.message.cc.length?[t("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Cc:")]),t("dd",{staticClass:"addresses"},e._l(e.message.cc,(function(s,a){return t("RecipientBadge",{directives:[{name:"test",rawName:"v-test:cc",arg:"cc"}],key:a,attrs:{"hide-email":!0,"show-badge-dropdown":e.showBadgeDropdown,value:s}})})),1)]:e._e(),e.message.bcc.length?[t("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Bcc:")]),t("dd",{staticClass:"addresses"},e._l(e.message.bcc,(function(s,a){return t("RecipientBadge",{directives:[{name:"test",rawName:"v-test:bcc",arg:"bcc"}],key:a,attrs:{"hide-email":!0,"show-badge-dropdown":e.showBadgeDropdown,value:s}})})),1)]:e._e(),e.message.reply_to.length?[t("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Reply-To:")]),t("dd",{staticClass:"addresses"},e._l(e.message.reply_to,(function(s,a){return t("RecipientBadge",{directives:[{name:"test",rawName:"v-test:replyTo",arg:"replyTo"}],key:a,attrs:{"hide-email":!0,"show-badge-dropdown":e.showBadgeDropdown,value:s}})})),1)]:e._e(),t("div",{staticClass:"date"},[t("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Date:")]),t("dd",[t("time",{attrs:{datetime:e.message.date},domProps:{textContent:e._s(e.absoluteDate)}})])])],2),e._t("top",null,{messageDecryptionStatus:e.decryptionStatus}),t("transition",{attrs:{name:"fade"}},[e.hasExternalImages&&!e.showExternalImages?t("div",{staticClass:"external-images"},[t("Icon",{staticClass:"icon",attrs:{symbol:"image"}}),t("p",[t("translate",[e._v(" External images are hidden for privacy and security reasons. ")]),t("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button button--small",attrs:{type:"button"},on:{click:function(t){return e.$emit("showExternalImages")}}},[e._v(" Show images ")])],1)],1):e._e()])],2),e.encryptedMessage?t("DecryptMessage",{attrs:{"message-id":e.message.id,"message-encryption-status":e.decryptionStatus},on:{decryptionStatus:e.setDecryptionStatus}}):t("MessageBody",{ref:"messageBody",attrs:{body:e.message.body,attachments:e.message.files,"element-container-class":e.message.css_prefix,"show-external-images":e.showExternalImages,"external-link-warning":e.externalLinkWarning,"dark-mode":e.darkMode},on:{hasExternalImages:function(t){e.hasExternalImages=t},mailToClicked:function(t){return e.$emit("mailToClicked",arguments)}}})],1)},i=[],n=(s("5377"),s("ad86")),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{directives:[{name:"test",rawName:"v-test:decryptMessage",arg:"decryptMessage"}],staticClass:"decrypt-message"},[t("div",{staticClass:"decrypt-message__inner"},[t("img",{attrs:{src:s("dfc9"),alt:"pgp"}}),e.unableToDecryptText?t("p",{staticClass:"spacing-bottom",domProps:{textContent:e._s(e.unableToDecryptText)}}):t("form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.onDecryptMessage.apply(null,arguments)}}},[t("PasswordField",{directives:[{name:"test",rawName:"v-test:pgpPassphrase",arg:"pgpPassphrase"}],staticClass:"spacing-bottom",attrs:{"validate-input":e.validatePgpPassphrase,"validation-error-message":e.decryptionStatusMessage,"show-custom-validity":e.showPasswordFieldValidation,focused:!0,"label-text":e.pgpPassPhraseText,id:"pgp-passphrase",required:"",autocomplete:"off"},model:{value:e.pgpPassphrase,callback:function(t){e.pgpPassphrase=t},expression:"pgpPassphrase"}}),t("LoadingButton",{directives:[{name:"test",rawName:"v-test:view-message-button",arg:"view-message-button"}],staticClass:"button button--primary button--full-width spacing-bottom",attrs:{loading:e.isBusy.decrypting,type:"submit"}},[e._v(" "+e._s(e.decryptText)+" ")]),t("Checkbox",{directives:[{name:"test",rawName:"v-test:remember-pgp-passphrase",arg:"remember-pgp-passphrase"}],staticClass:"spacing-bottom",attrs:{id:"remember-pgpPassphrase",label:e.rememberPgpPassphraseText},model:{value:e.rememberPgpPassphrase,callback:function(t){e.rememberPgpPassphrase=t},expression:"rememberPgpPassphrase"}})],1)])])},o=[],l=s("2f62"),c=s("34f1"),d=s("82ff"),u=s("a747"),g=s("8e8d"),m=s("7383"),h=s("9902"),p=s("2b0e"),f=p["a"].extend({name:"DecryptMessage",components:{PasswordField:u["a"],Checkbox:d["a"],LoadingButton:g["a"]},mixins:[c["b"]],props:{messageId:{type:String,required:!0},messageEncryptionStatus:{type:Number,required:!0}},data(){return{pgpPassphrase:"",rememberPgpPassphrase:!1,decryptionStatus:null,validatePgpPassphrase:!1}},computed:{decryptText(){return this.$gettext("Decrypt")},rememberPgpPassphraseText(){return this.$gettext("Remember this PGP passphrase until I log out")},pgpPassPhraseText(){return this.$gettext("Enter the PGP passphrase below to see the email.")},decryptionStatusMessage(){switch(this.decryptionStatus){case h["u"]:return this.$gettext("PGP key and passphrase do not match. Please try again.");case h["x"]:return this.$gettext("Email could not be decrypted. Trying a different passphrase may help.");default:return this.$gettext("PGP passphrase is required.")}},showPasswordFieldValidation(){return this.decryptionStatus===h["u"]||this.decryptionStatus===h["x"]},unableToDecryptText(){switch(this.decryptionStatus){case h["D"]:case h["B"]:return this.$gettext("You do not have the required key. Please contact the sender.");case h["w"]:return this.$gettext("The data is corrupted. Please contact the sender.");case h["y"]:return this.$gettext("An unknown error occurred. This email could not be decrypted.");default:return null}}},created(){this.decryptionStatus=this.messageEncryptionStatus},watch:{pgpPassphrase(){this.decryptionStatus=null,this.validatePgpPassphrase=!1}},methods:{...Object(l["b"])(["decryptMessage","setToastMessage"]),onDecryptMessage:Object(c["a"])("decrypting",(function(e){this.validatePgpPassphrase=!0;const t=e.target;return!!t.checkValidity()&&this.decryptMessage({id:this.messageId,pgpPassphrase:this.pgpPassphrase,rememberPgpPassphrase:this.rememberPgpPassphrase}).then(e=>{this.$emit("decryptionStatus",e.pgp.encryption.status)}).catch(e=>{const t=Object(m["a"])(e);switch(this.decryptionStatus=t,t){case h["D"]:case h["B"]:case h["w"]:case h["y"]:case h["x"]:case h["E"]:case h["u"]:this.$emit("decryptionStatus",t);break;default:throw this.setToastMessage({message:this.$gettext("Something went wrong. Please try again later.")}),e}})}))}}),y=f,v=(s("2ad2"),s("2877")),b=Object(v["a"])(y,r,o,!1,null,null,null),x=b.exports,_=s("00a1"),w=s("5abc"),M=function(){var e=this,t=e._self._c;return t("ExternalLinkWarning",{staticClass:"message-body",attrs:{"external-link-warning":e.externalLinkWarning}},[t("div",{directives:[{name:"test",rawName:"v-test:body",arg:"body"}],ref:"content",staticClass:"message-body__content",on:{click:e.onMessageBodyClicked}}),t("div",{staticClass:"message-body__attachments"},e._l(e.attachments,(function(s){return t("DownloadLink",{key:s.id,staticClass:"message-body__attachment button button--small",attrs:{"show-progress":"",url:s.url,download:s.filename,title:s.filename}},[t("Icon",{attrs:{symbol:"file"}}),t("span",[e._v(" "+e._s(s.filename)+" ("+e._s(e._f("formatDataSize")(s.size))+") ")])],1)})),1)])},k=[],S=(s("13d5"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{on:{click:e.interceptLink,mouseup:function(t){return"button"in t&&1!==t.button?null:e.interceptLink.apply(null,arguments)},auxclick:e.interceptLink}},[e._t("default"),t("Modal",{ref:"modal",scopedSlots:e._u([{key:"header",fn:function(){return[t("translate",[e._v("External link warning")])]},proxy:!0},{key:"content",fn:function({toggle:s}){return[t("p",[t("translate",[e._v(" We like to protect your privacy! You clicked on a link that leads to an external source: ")])],1),t("p",{staticClass:"row"},[t("strong",{staticClass:"external-link-warning__url col",domProps:{textContent:e._s(e.externalSource)}})]),t("p",[t("translate",[e._v("Are you sure you want to continue?")])],1),t("p",[t("Checkbox",{attrs:{id:"hideExternalLinkWarning",label:e.hideExternalLinkWarningLabel},model:{value:e.hideExternalLinkWarning,callback:function(t){e.hideExternalLinkWarning=t},expression:"hideExternalLinkWarning"}})],1),t("div",{staticClass:"modal__footer panel"},[t("button",{staticClass:"button button--accent",attrs:{type:"button"},on:{click:s}},[t("translate",[e._v("Cancel")])],1),t("a",{staticClass:"button button--primary",attrs:{href:e.externalSource,target:"_blank",rel:"noopener noreferrer"},on:{click:s}},[t("translate",[e._v("Continue")])],1)])]}}])})],2)}),C=[],$=s("714b"),T=p["a"].extend({name:"ExternalLinkWarning",components:{Checkbox:d["a"],Modal:$["a"]},props:{externalLinkWarning:{type:Boolean,default:!0}},data(){return{externalSource:"",hideExternalLinkWarning:!1}},computed:{hideExternalLinkWarningLabel(){return this.$gettext("Do not show this message again")},modal(){return this.$refs.modal}},watch:{hideExternalLinkWarning(e){this.$root.$emit("setExternalLinkWarning",{externalLinkWarning:!e})}},methods:{interceptLink(e){var t;if(!this.externalLinkWarning)return;let s=e.composedPath().find(e=>"A"===e.tagName);if(void 0===s)return;const a=["http:","https:"].includes(s.protocol);if(!a)return;const i=s.hostname===window.location.hostname||s.hostname.endsWith(".startmail.com");i||(e.preventDefault(),this.externalSource=s.href,null!==(t=this.modal)&&void 0!==t&&t.isOpen||this.modal.toggleModal())}}}),I=T,A=(s("881b"),Object(v["a"])(I,S,C,!1,null,null,null)),B=A.exports,P=s("cd20"),F=s("eb08");function E(e,t){if([...e].length<=t)return e;const[s,a]=L(e),i=[...s],n=[...a],r=Math.max(1,Math.floor((t-n.length-1)/2));return[...i.slice(0,r),"…",...i.slice(-r),...n].join("")}function L(e){const t=e.lastIndexOf(".");return t>=1?[e.slice(0,t),e.slice(t)]:[e,""]}var O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("a",{attrs:{href:e.bugged?"#":e.url,download:e.bugged?void 0:e.filename||!0},on:{click:e.download}},[e.downloading?t("Spinner",{staticClass:"spinner"}):e._e(),e.showProgress&&e.downloading?t("span",{domProps:{textContent:e._s(Math.floor(e.progress)+"%")}}):e._e(),e._t("default")],2)},D=[],N=s("7b46"),R=s("21a6"),j=s.n(R),q=s("5aa0"),V=p["a"].extend({components:{Spinner:q["a"]},props:{filename:{type:String,required:!1,default:void 0},showProgress:{type:Boolean,required:!1,default:!1},url:{type:String,required:!0}},data(){var e;const t=window.matchMedia("(display-mode: standalone)").matches,s=null===(e=Object(N["a"])())||void 0===e?void 0:e.name,a="ios"===s||"safari"===s;return{downloading:!1,bugged:a&&t,progress:0}},methods:{...Object(l["b"])(["setToastMessage"]),download(e){if(!this.bugged)return void this.$emit("done");e.preventDefault(),this.downloading=!0,this.progress=0;const t=new XMLHttpRequest;t.open("GET",this.url),t.responseType="blob",t.onprogress=e=>{e.lengthComputable&&(this.progress=e.loaded/e.total*100)},t.onload=()=>{j.a.saveAs(t.response,this.filename),this.downloading=!1,this.$emit("done")},t.onerror=()=>{this.downloading=!1,this.$emit("done"),this.setToastMessage({message:this.$gettext("Download error. Please refresh and try again.")}),this.$emit("done")},t.send()}}}),G=V,Y=(s("2494"),Object(v["a"])(G,O,D,!1,null,"54b8eaf0",null)),U=Y.exports;const z="#202945",H="<style>\n    @media not print {\n      img {\n        filter: invert(1) hue-rotate(180deg);\n      }\n    }\n  </style>",W=`<style>\n  @media print {\n    #sm-email-viewer p {\n      page-break-inside: avoid;\n    }\n    #sm-email-viewer h1, #sm-email-viewer h2, #sm-email-viewer h3, #sm-email-viewer h4, #sm-email-viewer h5, #sm-email-viewer h6 {\n      page-break-after: avoid;\n    }\n    #sm-email-viewer ul, #sm-email-viewer img {\n      page-break-inside: avoid;\n    }\n  }\n\n  /* styling for replied messages */\n  #sm-email-viewer blockquote {\n    padding-left: 8px;\n    margin: 8px 8px 8px 4px;\n    border-left: 2px solid #5856d6;\n    color: #5856d6;\n  }\n  #sm-email-viewer blockquote blockquote {\n    border-color: #03afcd;\n    color: #03afcd;\n  }\n  #sm-email-viewer blockquote blockquote blockquote {\n    border-color: #17c00d;\n    color: #17c00d;\n  }\n\n  @media print {\n    #sm-email-viewer blockquote {\n      border-color: ${z};\n      color: ${z};\n    }\n    #sm-email-viewer blockquote blockquote {\n      border-color: ${z};\n      color: ${z};\n    }\n    #sm-email-viewer blockquote blockquote blockquote {\n      border-color: ${z};\n      color: ${z};\n    }\n  }\n\n  #sm-email-viewer img[data-src] {\n    background: #e8e8e8;\n  }\n\n  #sm-email-viewer img[data-src][data-show] {\n    background-image: url(${s("c38c")})\n  }\n\n  #sm-email-viewer pre {\n    white-space: pre-wrap;\n  }\n\n  #sm-email-viewer .attachment::before {\n    background-image: url(${s("dbae")});\n    background-size: cover;\n    content: '';\n    display: inline-block;\n    height: 16px;\n    margin-right: 0.25rem;\n    width: 16px;\n  }\n</style>`,K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";var X={components:{DownloadLink:U,ExternalLinkWarning:B,Icon:_["a"]},filters:{formatDataSize:F["a"],truncateMiddle:E},props:{body:{type:String,required:!0,default:""},attachments:{type:Array,required:!0},showExternalImages:{type:Boolean,required:!1,default:!1},elementContainerClass:{type:String,required:!0},externalLinkWarning:{type:Boolean,default:!1},darkMode:{type:Boolean,default:!1}},data(){return{hasExternalImages:!1}},watch:{body(e){this.handleBodyUpdate(e),this.scaleContent()},showExternalImages(e){this.updateExternalImages(this.shadowDOM,e),this.scaleContent()},hasExternalImages(e){this.$emit("hasExternalImages",e)}},mounted(){this.shadowDOM=this.$refs.content.attachShadow({mode:"open"}),this.handleBodyUpdate(this.body),this.scaleContent()},methods:{checkHasExternalImages(e){const t=this.getExternalImages(e),s=Array.from(this.getStyleBlocks(e)).some(e=>e.textContent.toLowerCase().includes("sm-background-image"));return t.length>0||s},getExternalImages(e){return e.querySelectorAll("img[data-src]")},getStyleBlocks(e){return e.querySelectorAll("style")},getElementsWithStyleAttributes(e){return e.querySelectorAll("[style]")},handleBodyUpdate(e){const t=`\n          ${this.darkMode?H:""}\n          ${W}\n          <div id="sm-email-viewer" class="${this.elementContainerClass}">\n            ${e.replace(/<([/]?)sm-style(.*?)>/g,"<$1style$2>")}\n          </div>\n        `,s=document.createRange().createContextualFragment(t);this.updateExternalImages(s,this.showExternalImages),this.hasExternalImages=this.checkHasExternalImages(s),this.linkUrls(s),this.shadowDOM.innerHTML="",this.shadowDOM.appendChild(s)},async scaleContent(){await Promise.all(Array.from(this.shadowDOM.querySelectorAll("img")).filter(e=>!e.complete||!e.getAttribute("height")||!e.getAttribute("width")).map(e=>new Promise(t=>{const s=new AbortController;function a(){s.abort(),t()}e.addEventListener("load",a,{signal:s.signal}),e.addEventListener("error",a,{signal:s.signal})}))),this.$el.style.removeProperty("height");const{offsetWidth:e,scrollWidth:t}=this.$refs.content||{},s=Math.max(.75,e/t);this.$el.style.height=this.$el.offsetHeight*s+"px",this.$refs.content.style.scale=s},updateExternalImages(e,t){const s=this.getExternalImages(e);if(Array.from(s).forEach(e=>{t?(e.src=e.getAttribute("data-src"),e.setAttribute("data-show",""),e.addEventListener("load",()=>e.removeAttribute("data-src"))):(e.src=K,e.removeAttribute("data-show"))}),t){const t=this.getStyleBlocks(e),s=this.getElementsWithStyleAttributes(e);Array.from(t).forEach(e=>e.textContent=this.toUnsafe(e.textContent)),Array.from(s).forEach(e=>e.setAttribute("style",this.toUnsafe(e.getAttribute("style"))))}},toUnsafe(e){return e.replace(/sm-background-image/gi,"background-image")},onMessageBodyClicked(e){const t=e.composedPath&&e.composedPath().find(e=>"A"===e.tagName)||"A"===e.target.tagName&&e.target.tagName;if(t&&"mailto:"===t.protocol){e.preventDefault();const s=t.pathname,a=t.search&&decodeURI(t.search),i=a&&a.match(/subject=([^&]+)/i)&&a.match(/subject=([^&]+)/i)[1];this.$emit("mailToClicked",s,i)}},linkUrls(e){const t="(?:(?:[a-z]+:)?//)",s="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",i="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",n="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?",r="(?::\\d{2,5})?",o='(?:[/?#][^\\s"\\)\\]]*)?',l=[{prefix:"[",postfix:"]"},{prefix:"(",postfix:")"}],c=l.map(e=>"\\"+e.prefix).join(""),d=l.map(e=>"\\"+e.postfix).join(""),u=`(?:[${c}])?`,g=`(?:[${d}])?`,m=`(${u})((?:(${t})|www\\.)(?:localhost|${s}|${a}${i}${n})${r}${o})(${g})`,h=new RegExp(m,"gi");if(!h.test(e.textContent))return;const p=(e,t)=>t.nodeType===Node.TEXT_NODE?[...e,t]:Array.from(t.childNodes).reduce(p,e),f=Array.from(e.childNodes).reduce(p,[]).filter(e=>h.test(e.textContent));f.forEach(e=>{if(!e.parentElement.closest("a")){const t=Object(P["a"])(e.textContent),s=t.replace(h,(e,t,s,a,i)=>{const n=a?s:"http://"+s,r=t&&l.some(e=>e.prefix===t&&e.postfix===i);return r?`${t}<a href="${encodeURI(n)}" rel="noopener noreferrer" target="_blank">${s}</a>${i}`:`<a href="${encodeURI(n+i)}" rel="noopener noreferrer" target="_blank">${s}${i}</a>`}),a=document.createRange().createContextualFragment(s);e.parentNode.replaceChild(a,e)}})}}},Q=X,J=(s("8fb9"),Object(v["a"])(Q,M,k,!1,null,null,null)),Z=J.exports,ee=s("76da"),te=s("634d");const se=0;var ae={name:"Message",components:{DecryptMessage:x,DownloadLink:U,Dropdown:n["a"],Icon:_["a"],MessageBody:Z,RecipientBadge:w["a"]},filters:{formatDataSize:F["a"]},mixins:[ee["f"]],props:{message:{type:Object,required:!0},attachmentsDownloadLink:{type:String,default:null},showExternalImages:{type:Boolean,default:!1},externalLinkWarning:{type:Boolean,default:!1},showBadgeDropdown:{type:Boolean,default:!1},displayFormats:{type:Object,required:!1,default:()=>({date:"",time:""})},darkMode:{type:Boolean,default:!1}},data(){var e;return{hasExternalImages:!1,decryptionStatus:null===(e=this.message.pgp)||void 0===e?void 0:e.encryption.status}},computed:{absoluteDate(){return this.formatDate(this.message.date,this.$pgettext("long message date","dddd, MMMM D, YYYY [at] HH:mm:ss"))},attachments(){return(this.message.files||[]).filter(e=>!e.inline)},attachmentsButtonLabel(){return this.$gettextInterpolate(this.$ngettext("%{num} attachment","%{num} attachments",this.attachments.length),{num:this.attachments.length})},encryptedMessage(){var e;return(null===(e=this.message.flags)||void 0===e?void 0:e.is_encrypted)&&this.decryptionStatus!==se},relativeDate(){const e=Object(te["c"])(this.displayFormats.date),t="12h"===Object(te["d"])(this.displayFormats.time)?"h:mm a":"H:mm",s=this.$gettextInterpolate(this.$gettext("%{ dateFormat } [at] %{ timeFormat }"),{dateFormat:e,timeFormat:t});return this.fromNow(this.message.date,{sameDay:this.$gettextInterpolate(this.$gettext("[Today at] %{ timeFormat }"),{timeFormat:t}),lastWeek:s,lastDay:s,lastYear:s,sameElse:s})}},methods:{setDecryptionStatus(e){this.decryptionStatus=e}}},ie=ae,ne=(s("8901"),Object(v["a"])(ie,a,i,!1,null,"d3d4d666",null));t["a"]=ne.exports},1802:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"layout-dropdown"},[t("Dropdown",{class:{"dropdown--align-left":e.layoutSplitState===e.SPLIT_VERTICAL},scopedSlots:e._u([{key:"button",fn:function({isOpen:s,toggle:a}){return[t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:layoutButton",arg:"layoutButton"}],staticClass:"layout-dropdown__button button--auto-hide-label button--small",attrs:{active:s,dropdown:!0,icon:"layout",title:e.changeLayoutText,label:e.changeLayoutText},on:{click:a}})]}},{key:"content",fn:function({toggle:s}){return[t("h4",{staticClass:"layout-dropdown__heading"},[t("translate",{attrs:{"translate-context":"layout"}},[e._v("Density")])],1),t("ContextSwitcher",{staticClass:"layout-dropdown__density-selector",attrs:{options:e.densityOptions,active:e.density},on:{change:e.toggleDensity}}),e.showSplitOptions?[t("h4",{staticClass:"layout-dropdown__heading"},[t("translate",[e._v("Layout")])],1),t("RadioInput",{staticClass:"layout-dropdown__split-selector link-list",attrs:{options:e.layoutOptions,"option-class":"link-list__item",id:"layout"},on:{input:s},model:{value:e.layout,callback:function(t){e.layout=t},expression:"layout"}})]:e._e()]}}])})],1)},i=[],n=s("2f62"),r=s("d379"),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"context-switcher"},e._l(e.options,(function({text:s,value:a}){return t("div",{key:a,staticClass:"context-switcher__switch"},[t("button",{directives:[{name:"test",rawName:"v-test:contextSwitchButton",arg:"contextSwitchButton"}],key:a,staticClass:"context-switcher__switch-button button",attrs:{type:"button"},on:{click:function(t){return e.$emit("change",a)}}},[a===e.densityCompact?[t("Icon",{directives:[{name:"show",rawName:"v-show",value:e.active===e.densityCompact,expression:"active === densityCompact"}],staticClass:"context-switcher__icon",attrs:{symbol:"layout-compact-active"}}),t("Icon",{directives:[{name:"show",rawName:"v-show",value:e.active!==e.densityCompact,expression:"active !== densityCompact"}],staticClass:"context-switcher__icon",attrs:{symbol:"layout-compact-inactive"}})]:[t("Icon",{directives:[{name:"show",rawName:"v-show",value:e.active===e.densityDefault,expression:"active === densityDefault"}],staticClass:"context-switcher__icon",attrs:{symbol:"layout-default-active"}}),t("Icon",{directives:[{name:"show",rawName:"v-show",value:e.active!==e.densityDefault,expression:"active !== densityDefault"}],staticClass:"context-switcher__icon",attrs:{symbol:"layout-default-inactive"}})]],2),t("span",[e._v(e._s(s))])])})),0)},l=[],c=s("00a1"),d=s("bda7"),u={name:"ContextSwitcher",components:{Icon:c["a"]},props:{options:{type:Array,default:()=>[]},active:{type:String,required:!0}},computed:{densityCompact(){return d["a"]},densityDefault(){return d["b"]}}},g=u,m=(s("dc14"),s("2877")),h=Object(m["a"])(g,o,l,!1,null,null,null),p=h.exports,f=s("ad86"),y=s("1f79"),v=s("ec51"),b={name:"LayoutDropdown",components:{ActionBarButton:r["a"],Dropdown:f["a"],ContextSwitcher:p,RadioInput:y["a"]},props:{showSplitOptions:{type:Boolean,default:!0,required:!1}},data(){return{SPLIT_VERTICAL:d["f"]}},computed:{...Object(n["e"])({layoutSplitState:e=>e.layout.activeSplit,densityState:e=>e.layout.density}),densityOptions(){return Array.from(d["c"].values()).map(({value:e})=>({text:this.translateDensityOption(e),value:e}))},density:{get(){return this.densityState},set(e){this.setDensity({density:e})}},layoutOptions(){return[d["e"],d["d"],d["f"]].map(e=>({name:this.translateLayoutOption(e),value:e,className:"message-list__layout-"+e.toLowerCase().replace(/\s/g,"-")}))},layout:{get(){return this.layoutSplitState},set(e){this.setLayoutSplit({layoutSplit:e})}},changeLayoutText(){return this.$gettext("Change layout")}},async created(){const e=await Object(v["a"])("sm-layout-split");e&&this.setLayoutSplit({layoutSplit:e});const t=await Object(v["a"])("sm-layout-density");t&&this.setDensity({density:t})},methods:{...Object(n["b"])("layout",["setDensity","setLayoutSplit"]),toggleDensity(e){this.setDensity({density:e})},translateLayoutOption(e){switch(e){case d["f"]:return this.$gettext("Vertical split");case d["d"]:return this.$gettext("Horizontal split");case d["e"]:return this.$gettext("No split")}},translateDensityOption(e){switch(e){case d["b"]:return this.$gettext("Default");case d["a"]:return this.$gettext("Compact")}}}},x=b,_=(s("9478"),Object(m["a"])(x,a,i,!1,null,null,null));t["a"]=_.exports},"1a12":function(e,t,s){"use strict";s("8c68")},"21a6":function(e,t,s){(function(s){var a,i,n;(function(s,r){i=[],a=r,n="function"===typeof a?a.apply(t,i):a,void 0===n||(e.exports=n)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function a(e,t,s){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){l(a.response,t,s)},a.onerror=function(){console.error("could not download file")},a.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof s&&s.global===s?s:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,s){var o=r.URL||r.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?n(l):i(l.href)?a(e,t,s):n(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){n(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,s,r){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,r),s);else if(i(e))a(e,s,r);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){n(o)}))}}:function(e,t,s,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return a(e,t,s);var n="application/octet-stream"===e.type,l=/constructor/i.test(r.HTMLElement)||r.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||n&&l||o)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},d.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,g=u.createObjectURL(e);i?i.location=g:location.href=g,i=null,setTimeout((function(){u.revokeObjectURL(g)}),4e4)}});r.saveAs=l.saveAs=l,e.exports=l}))}).call(this,s("c8ba"))},2494:function(e,t,s){"use strict";s("6a2f")},"2ad2":function(e,t,s){"use strict";s("86c1")},"2b83":function(e,t,s){e.exports=s.p+"img/empty-state-spam.9f297c73.svg"},"31ca":function(e,t,s){},4430:function(e,t,s){e.exports=s.p+"img/empty-state-trash.da929032.svg"},"49d0":function(e,t,s){"use strict";s("f03c")},"4ce4":function(e,t,s){},5550:function(e,t,s){},"58de":function(e,t,s){"use strict";s("5fa1")},"5aa7":function(e,t,s){},"5abc":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Dropdown",{staticClass:"recipient-badge dropdown--align-left",scopedSlots:e._u([{key:"button",fn:function({toggle:s,isOpen:a}){return[t("Badge",{ref:"badge",attrs:{active:a,"is-removable":e.isRemovable,tabindex:e.tabindex,value:e.displayValue,title:e.value.email,"show-key-availability":e.showKeyAvailability,"is-invalid":e.isInvalid,"key-available":e.keyAvailable,id:e.id,official:e.official,draggable:e.draggable},on:{click:function(t){return e.onClickBadge(s)},blur:e.onBlur,delete:function(t){return e.$emit("delete")},focus:e.onFocus},nativeOn:{dblclick:function(t){return e.onEdit.apply(null,arguments)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"c",void 0,t.key,void 0)||t.shiftKey||t.altKey||t.metaKey?null:t.ctrlKey?e.copy.apply(null,arguments):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"x",void 0,t.key,void 0)||t.shiftKey||t.altKey||t.metaKey?null:t.ctrlKey?e.cut.apply(null,arguments):null}],dragstart:function(t){return e.$emit("dragstart",{event:t,recipient:{...e.value}})},drag:function(t){return e.$emit("drag",{event:t,recipient:{...e.value}})},dragend:function(t){return e.$emit("dragend",{event:t,recipient:{...e.value}})}}})]}},e.showBadgeDropdown?{key:"content",fn:function(){return[e.isBusy.findingContactInformation?t("div",{staticClass:"recipient-badge__loader"},[t("Spinner")],1):t("div",{staticClass:"recipient-badge__content"},[t("div",{staticClass:"recipient-badge__top-wrap"},[t("span",{staticClass:"recipient-badge__icon-wrap"},[t("Icon",{staticClass:"recipient-badge__icon",attrs:{symbol:"user"}})],1),e.contact&&e.contact.name?t("span",{staticClass:"recipient-badge__name"},[e._v(e._s(e.contact.name))]):t("span",{staticClass:"recipient-badge__name"},[e._v(e._s(e.value.name||"-"))]),t("span",{staticClass:"recipient-badge__email"},[e._v(e._s(e.value.email))])]),t("div",{staticClass:"recipient-badge__actions"},[t("Modal",{scopedSlots:e._u([{key:"header",fn:function(){return[e.contact?t("translate",[e._v("Edit contact")]):t("translate",[e._v("Add contact")])]},proxy:!0},{key:"toggle",fn:function({toggle:s}){return[e.contact?t("button",{directives:[{name:"test",rawName:"v-test:editContact",arg:"editContact"}],key:e.contact.id,staticClass:"button button--small",attrs:{type:"button"},on:{click:s}},[t("Icon",{attrs:{symbol:"user-edit"}}),t("translate",[e._v("Edit contact")])],1):t("button",{directives:[{name:"test",rawName:"v-test:addContact",arg:"addContact"}],staticClass:"button button--small",attrs:{type:"button"},on:{click:s}},[t("Icon",{attrs:{symbol:"user-edit"}}),t("translate",[e._v("Add to contacts")])],1)]}},{key:"content",fn:function({beforeClose:s,setLoading:a,toggle:i}){return[t("ContactForm",{attrs:{"before-modal-close":s,contact:e.contact||e.prefillContact,"set-modal-loading":a,"toggle-modal":i},on:{saved:e.onContactSaved}})]}}],null,!1,1188714149)})],1)])]},proxy:!0}:null],null,!0)})},i=[],n=s("2b0e"),r=s("79f6"),o=s("708e"),l=s("c0e9"),c=s("ad86"),d=s("00a1"),u=s("714b"),g=s("5aa0"),m=s("7ec9"),h=s("34f1"),p=n["a"].extend({name:"RecipientBadge",components:{Badge:o["a"],ContactForm:l["a"],Dropdown:c["a"],Icon:d["a"],Modal:u["a"],Spinner:g["a"]},mixins:[h["b"]],props:{draggable:{type:Boolean,default:!1},hideEmail:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},isKeyAvailable:{type:Boolean,default:!1},isRemovable:{type:Boolean,default:!1},official:{type:Boolean,default:!1},showBadgeDropdown:{type:Boolean,default:!0},showKeyAvailability:{type:Boolean,default:!1},tabindex:{type:[Number,String],default:0},value:{type:Object,required:!0},id:{type:String,required:!1,default:""}},data(){return{contact:null,badgeClicked:!1}},computed:{badge(){return this.$refs.badge},displayValue(){return Object(m["a"])(this.value,this.hideEmail)},defaultContactData(){return{name:this.value.name||"",email_addresses:[{label:"home",value:this.value.email||"",fingerprints:[],is_primary:!0}]}},selectedAddress:{get(){return this.value.email?this.value.email:""},set(e){this.$emit("input",{contact:this.value.contact,name:this.value.name,email:e})}},keyAvailable(){return this.showKeyAvailability&&this.isKeyAvailable},emailAddresses(){return this.contact?this.contact.email_addresses.map(e=>e.value):[this.value.email]},emailAddressOptions(){return this.emailAddresses.map(e=>({value:e,name:e}))},prefillContact(){return{address:"",always_encrypt:!1,always_show_external_images:!1,always_sign:!1,city:"",company_name:"",contact_group_ids:[],country:"",display_name:"",email_addresses:[{label:"home",value:this.value.email||"",fingerprints:[],is_primary:!0}],favorite:!1,id:"",job_title:"",name:this.value.name||"",notes:"",phone_number:"",po_box:"",state:"",website:"",zipcode:""}}},created(){this.contact=this.value.contact||null},methods:{focus(){this.badge.focus()},onBlur(){this.$emit("blur")},onFocus(){this.$emit("focus")},async onClickBadge(e){this.isInvalid||(e(),this.contact=await this.findContactInformation())},findContactInformation:Object(h["a"])("findingContactInformation",(async function(){if(this.contact)return this.contact;const{contacts:e}=await r["c"].contacts.find({groupId:"all",limit:1,offset:0,query:this.value.email});return e[0]||null})),onEdit(){this.$emit("edit",this.value.email)},async copy(){try{await navigator.clipboard.writeText(this.displayValue)}catch(e){}},async cut(){try{await navigator.clipboard.writeText(this.displayValue),this.$emit("delete")}catch(e){}},onContactSaved({contact:e}){this.contact=e}}}),f=p,y=(s("821a"),s("2877")),v=Object(y["a"])(f,a,i,!1,null,null,null);t["a"]=v.exports},"5cab":function(e,t,s){},"5d6b":function(e,t,s){},"5d7e":function(e,t,s){"use strict";s.r(t);var a,i=function(){var e=this,t=e._self._c;return t("section",{directives:[{name:"test",rawName:"v-test:messageList",arg:"messageList"}],staticClass:"message-list",class:{"message-list--split":e.isVerticalSplit}},[t("h1",[e._v(e._s(e.debouncedMessageLoading))]),e.error?t("ErrorView",{attrs:{"error-type":e.error}}):e.showSkeletonList?t("SkeletonList",{attrs:{"item-count":e.skeletonUiItemCount}}):t("div",{staticClass:"message-list__content"},[e._l(e.groupedMessages,(function(s){return[s.title&&s.messages.length?t("h4",{key:s.title,staticClass:"panel__title panel__title--list"},[e._v(" "+e._s(s.title)+" ")]):e._e(),s.messages.length?t("transition-group",{key:s.title+"-list",staticClass:"message-list__items",attrs:{tag:"ul",name:"list"}},e._l(s.messages,(function(s){return t("MessageListItem",{key:s.id,attrs:{message:s,email:e.messageSender(s),"show-folder":e.showFolders,tooltip:e.messageTooltip(s),"date-format":e.dateFormat,"time-format":e.timeFormat},on:{click:e.onItemClicked,"shift-select":e.onShiftSelect}})})),1):e._e()]})),0===e.activeMessagesCount?[t("EmptyFolder",{attrs:{"folder-id":e.activeFolderId,"active-search-query":e.activeSearchQuery,"active-filters":Boolean(e.activeFilters.length)}})]:e._e()],2)],1)},n=[],r=(s("14d9"),s("9902")),o=s("7383"),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("EmptyView",{directives:[{name:"test",rawName:"v-test:empty-folder",arg:"empty-folder"}],attrs:{image:e.image}},[t("p",{domProps:{innerHTML:e._s(e.content)}}),e.activeSearchQuery?t("SupportCenterLink",{staticClass:"button button--small",attrs:{article:"360007236197"}},[t("translate",[e._v("Learn how to use search")]),t("Icon",{attrs:{size:"small",symbol:"external-link"}})],1):e._e(),e.activeFilters?t("button",{staticClass:"button button--accent button--small spacing-top",on:{click:e.clearFilters}},[t("translate",[e._v("Clear filters")])],1):e._e()],1)},c=[],d=s("2b0e"),u=s("595f"),g=s("00a1"),m=s("0d8c"),h=s.n(m),p=s("c799"),f=s.n(p),y=s("9d4a"),v=s.n(y),b=s("f9ca"),x=s.n(b),_=s("4430"),w=s.n(_),M=s("2b83"),k=s.n(M),S=s("ee63"),C=s.n(S),$=s("2f62"),T=s("ac4b");(function(e){e["Inbox"]="inbox",e["Drafts"]="Drafts",e["Sent"]="Sent Messages",e["Trash"]="Deleted Messages",e["Junk"]="Junk"})(a||(a={}));var I=d["a"].extend({name:"EmptyFolder",components:{EmptyView:u["a"],Icon:g["a"],SupportCenterLink:T["a"]},props:{folderId:{type:String,default:""},activeSearchQuery:{type:String,default:""},activeFilters:{type:Boolean,required:!0}},data(){return{image:null,content:null}},created(){this.updateData()},computed:{isFolderIdValid(){return Boolean(this.folderId)}},methods:{...Object($["b"])("filters",["setFilters"]),updateData(){this.activeSearchQuery?this.setSearchView():this.activeFilters?this.setFiltersView():this.isFolderIdValid&&this.folderId.toLowerCase()===a.Inbox?this.setInboxView():this.folderId===a.Drafts?this.setDraftsView():this.folderId===a.Sent?this.setSentView():this.folderId===a.Trash?this.setTrashView():this.folderId===a.Junk?this.setJunkView():this.setUserFolderView()},setSearchView(){this.image=h.a,this.content=this.$gettextInterpolate(this.$gettext("<strong>%{ query }</strong> could not be found in any of your emails. Try using different keywords or check for typos. Or refine your search to a folder, recipient, date, or subject using a search operator."),{query:this.activeSearchQuery})},setFiltersView(){this.image=f.a,this.content=this.$gettext("Your filters do not match any emails in this folder.")},setInboxView(){this.image=f.a,this.content=this.$gettext("Sit back and relax, you have an empty <strong>Inbox</strong>.")},setDraftsView(){this.image=v.a,this.content=this.$gettext("Nice productivity skills! You have no draft emails to resume in your <strong>Drafts</strong> folder.")},setSentView(){this.image=x.a,this.content=this.$gettext("That’s a refreshing look, an empty <strong>Sent</strong> folder.")},setTrashView(){this.image=w.a,this.content=this.$gettext("No emails in your <strong>Trash</strong>, does that feel good or what?")},setJunkView(){this.image=k.a,this.content=this.$gettext("Bam! <strong>No spam!</strong>")},setUserFolderView(){this.image=C.a,this.content=this.$gettextInterpolate(this.$gettext("Going for the uncluttered look? <strong>%{ folderId }</strong> is empty."),{folderId:this.isFolderIdValid?this.folderId:""})},async clearFilters(){const e=await this.setFilters({filters:[]}),{page:t,...s}=this.$route.query;this.$router.replace({...this.$route,name:this.$route.name||void 0,query:{...s,filter:e}}),this.updateData()}}}),A=I,B=s("2877"),P=Object(B["a"])(A,l,c,!1,null,null,null),F=P.exports,E=s("410b"),L=(s("5377"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("li",{directives:[{name:"test",rawName:"v-test:messageListItem",arg:"messageListItem"}]},[t("a",{directives:[{name:"test",rawName:"v-test:messageListItemLink",arg:"messageListItemLink"},{name:"draggable",rawName:"v-draggable",value:{onDropped:e.onDropped},expression:"{ onDropped }"}],staticClass:"message-list-item",class:{"message-list-item--is-unread":e.message.unread,"message-list-item--selected":e.isChecked,"message-list-item--active":e.isInReadingPane,"message-list-item--is-flagged":e.message.flagged,"message-list-item--compact":e.isCompactView,"message-list-item--vertical-split":e.isVerticalSplit},attrs:{href:e.route.href},on:{click:[function(e){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;e.preventDefault()},function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.$emit("click",e.route)}]}},[t("Checkbox",{directives:[{name:"test",rawName:"v-test:check",arg:"check"},{name:"test",rawName:"v-test:messageCheckbox",arg:"messageCheckbox"}],staticClass:"message-list-item__select",class:{"message-list-item__select--checked":e.isChecked},attrs:{id:e.message.id,checked:e.isChecked,label:"Select "+e.message.subject,"has-hidden-label":""},on:{change:e.onSelectChanged},nativeOn:{click:function(e){e.stopPropagation()}}}),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{placement:"right",content:e.flagDisplayValue},expression:"{ placement: 'right', content: flagDisplayValue }"}],staticClass:"button button--icon-only message-list-item__flag",attrs:{"aria-label":e.flagDisplayValue,type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onFlagMessageClicked.apply(null,arguments)}}},[e.message.flagged?t("Icon",{key:"flag",attrs:{symbol:"flag"}}):t("Icon",{key:"flag-outline",attrs:{symbol:"flag-outline"}})],1),t("p",{directives:[{name:"test",rawName:"v-test:email",arg:"email"}],staticClass:"message-list-item__email",attrs:{title:e.tooltip}},[e._v(" "+e._s(e.email)+" "),e.message.official?t("OfficialBadge"):e._e()],1),e.message.flags.is_answered||e.message.flags.is_forwarded?t("span",{staticClass:"message-list-item__status"},[e.message.flags.is_answered?t("Icon",{attrs:{symbol:"reply"}}):e.message.flags.is_forwarded?t("Icon",{attrs:{symbol:"forward"}}):e._e()],1):e._e(),e.showFolder?t("p",{staticClass:"message-list-item__folder chip",attrs:{title:e.folderName},domProps:{textContent:e._s(e.folderName)}}):e._e(),e.isDraftMessage&&!e.showFolder?t("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"message-list-item__draft"},[e._v(" Draft ")]):e._e(),t("p",{directives:[{name:"test",rawName:"v-test:subject",arg:"subject"}],staticClass:"message-list-item__subject",class:{"message-list-item__subject--has-folder":e.showFolder,"message-list-item__subject--has-status-icon":e.message.flags.is_answered||e.message.flags.is_forwarded},attrs:{title:e.subject}},[e._v(" "+e._s(e.subject)+" ")]),e.message.flags.is_encrypted?t("Icon",{staticClass:"message-list-item__encrypted",attrs:{symbol:"locked"}}):e._e(),e.message.flags.has_attachment?t("Icon",{staticClass:"message-list-item__attachment",attrs:{symbol:"attach"}}):e._e(),e.message.flags.is_signed?t("Icon",{staticClass:"message-list-item__signed",attrs:{symbol:"signed"}}):e._e(),t("div",{directives:[{name:"test",rawName:"v-test:date",arg:"date"}],staticClass:"message-list-item__date"},[e._v(" "+e._s(e.date)+" ")])],1)])}),O=[],D=s("82ff"),N=s("3cc4"),R=s("76da"),j=s("cd02"),q=s("5488"),V=s("1d41"),G=s("bda7"),Y=d["a"].extend({components:{Checkbox:D["a"],Icon:g["a"],OfficialBadge:N["a"]},mixins:[R["f"],j["a"],q["a"]],props:{message:{type:Object,required:!0},email:{type:String,required:!0},showFolder:{type:Boolean,required:!1},tooltip:{type:String,required:!0},dateFormat:{type:String,required:!0},timeFormat:{type:String,required:!0}},computed:{...Object($["c"])(["activeFolder","selectedMessages","folderById"]),...Object($["c"])("layout",["isVerticalSplit","isCompactView"]),...Object($["e"])({selectedMessagesIds:e=>e.messages.selectedMessagesIds,layoutSplitState:e=>e.layout.activeSplit}),subject(){return this.message.subject||this.$gettext("(no subject)")},timeFormatString(){return"12h"===this.timeFormat?"h:mm A":"H:mm"},date(){return Object(R["e"])(this.message.date)?this.formatDate(this.message.date,this.timeFormatString):this.formatDate(this.message.date,this.dateFormat)},flagDisplayValue(){return this.message.flagged?this.$gettext("Unflag message"):this.$gettext("Flag message")},isChecked(){return this.selectedMessagesIds.indexOf(this.message.id)>-1},isInReadingPane(){var e;return this.layoutSplitState!==G["e"]&&this.message.id===(null===(e=this.$route.query)||void 0===e?void 0:e.message)},route(){if(this.isDraftMessage)return this.$router.resolve({name:V["MAIL_COMPOSE"],query:{draftId:this.message.id}});{const{message:e,...t}=this.$route.query;return this.$router.resolve({name:V["MAIL_MESSAGE"],params:{folder:this.message.folder_id,message:this.message.id},query:t})}},messageFolder(){return this.folderById(this.message.folder_id)},isDraftMessage(){var e;return"drafts"===(null===(e=this.messageFolder)||void 0===e?void 0:e.type)},folderName(){return this.getFolderName(this.messageFolder)},selectText(){return this.$gettext("Select")},unselectText(){return this.$gettext("Unselect")}},methods:{...Object($["b"])(["selectMessage","deselectMessage","changeMessagesFlagStatus","loadMessages","setToastMessage","moveMessagesToFolder"]),onSelectChanged(e,t){t?this.$emit("shift-select",{message:this.message,selected:e}):e?this.selectMessage({id:this.message.id}):this.deselectMessage({id:this.message.id})},onFlagMessageClicked(){this.changeMessagesFlagStatus({messagesIds:[this.message.id],flagged:!this.message.flagged}).catch(e=>{const t=this.message.flagged?this.$gettext("Sorry, could not unflag message"):this.$gettext("Sorry, could not flag message");throw this.setToastMessage({message:t}),this.loadMessages(),e})},onDropped({folderId:e,message:t}){this.updateRoute(),this.selectedMessages.length>0?this.moveSelectedMessages({folderId:e}):this.moveMessagesToFolder({messagesIds:[t.id],folderId:e}).then(()=>{const t=this.folderById(e),s=this.getFolderName(t);this.setToastMessage({message:this.$gettextInterpolate(this.$gettext("Message moved to %{ folderName }"),{folderName:s},!0)}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("We could not move this message")}),this.loadMessages()})},updateRoute(){const{message:e,...t}=this.$route.query;e&&this.$router.replace({...this.$route,name:this.$route.name||void 0,query:t})}}}),U=Y,z=(s("815e"),Object(B["a"])(U,L,O,!1,null,null,null)),H=z.exports,W=s("6825"),K=s("634d"),X=s("3651"),Q=s("330c"),J=s("97c9"),Z=s("a763"),ee=s("8a60"),te=s.n(ee),se={components:{EmptyFolder:F,ErrorView:E["b"],MessageListItem:H,SkeletonList:W["a"]},mixins:[Q["a"],q["a"]],data(){return{loadingErrorCode:null,loading:!0}},computed:{...Object($["e"])({activeFolderId:e=>e.folders.activeFolderId,activeMessagesIds:e=>e.messages.activeMessagesIds,selectedMessagesIds:e=>e.messages.selectedMessagesIds,activeSearchQuery:e=>e.search.activeSearchQuery,sortOrderState:e=>e.sorting.sortOrder,activeFilters:e=>e.filters.activeFilters,layoutSplitState:e=>e.layout.activeSplit,debouncedMessageLoading:e=>e.messages.debouncedMessageLoading}),...Object($["c"])(["activeFolder","messageById","nextMessageId","pagination/currentPageSize","previousMessageId","loadingFoldersError","loadingMessages"]),...Object($["c"])("layout",["densityOption","isVerticalSplit"]),...Object($["c"])("authentication",["user"]),showSkeletonList(){return this.loading||this.loadingMessages&&0===this.activeMessagesCount||this.debouncedMessageLoading},activeMessages(){return this.activeMessagesIds.map(this.messageById)},groupedMessages(){const e=[Z["g"],Z["h"],Z["e"],Z["f"]];return this.densityOption.groupItems&&e.includes(this.sortOrder)?Object.entries(this.groupByFirstCharacter(this.activeMessages,"#",this.messageGroupBy)).map(([e,t])=>({title:e,messages:t})):[{messages:this.activeMessages}]},showFolders(){return Boolean(this.activeSearchQuery)},outbound(){return["sent","drafts"].includes(this.activeFolderType)},activeFolderType(){var e;return null===(e=this.activeFolder)||void 0===e?void 0:e.type},skeletonUiItemCount(){return this["pagination/currentPageSize"]||12},error(){return this.loadingFoldersError?E["a"].LoadingFoldersError:this.loadingErrorCode?this.loadingErrorCode===r["o"]?E["a"].FolderNotFound:E["a"].LoadingMessagesError:null},activeMessagesCount(){return this.activeMessages.length},sortOrder:{get(){return this.sortOrderState},set(e){this.setSortOrder({order:e}),this.$router.replace({...this.$route,query:{...this.$route.query,sortOrder:e}})}},dateFormat(){const e=this.user,t=e&&e.preferences&&e.preferences.date_format;return Object(K["c"])(t||"")},timeFormat(){const e=this.user,t=e&&e.preferences&&e.preferences.time_format;return Object(K["d"])(t||"")}},async created(){try{await this.loadMessages(),this.loading=!1}catch(e){throw this.loading=!1,this.loadingErrorCode=Object(o["a"])(e)||"Unknown error",e}},mounted(){const e=e=>()=>this.layoutSplitState!==G["e"]&&e();te.a.bind(["down","j"],e(()=>this.$root.$emit("readMessageInCurrentView",this.nextMessageId))),te.a.bind(["up","k"],e(()=>this.$root.$emit("readMessageInCurrentView",this.previousMessageId)))},beforeDestroy(){te.a.unbind(["up","down","j","k"])},methods:{...Object($["b"])(["setMessageSelection","setSortOrder","loadMessages"]),...Object($["b"])("filters",["setFilter"]),onItemClicked(e){"drafts"===this.activeFolderType||this.layoutSplitState===G["e"]?this.$router.push(e.location):this.$route.query.message!==e.location.params.message&&this.$router.push({...this.$route,query:{...this.$route.query,message:e.location.params.message}})},messageSender(e){if(this.outbound){const t=e.to.concat(e.cc,e.bcc).map(e=>e.name||e.email).join(", ");return`${this.$gettext("To:")} ${t}`}return e.from.name||e.from.email},messageTooltip(e){if(this.outbound){const t=e.to.concat(e.cc,e.bcc).map(e=>e.name||e.email);return t[0]||""}return e.from.email},messageGroupBy(e){if(this.outbound){const t=e.to.concat(e.cc,e.bcc).map(e=>e.name||e.email);return t[0]||""}return(null===e||void 0===e?void 0:e.from.name)||(null===e||void 0===e?void 0:e.from.email)},onShiftSelect({message:e,selected:t}){const s=Object(X["a"])(this.activeMessagesIds,this.selectedMessagesIds,e.id,t);this.setMessageSelection({ids:s})},translateSortOption(e){switch(e){case Z["a"]:return this.$gettext("Date ascending");case Z["b"]:return this.$gettext("Date descending (default)");case Z["g"]:case Z["e"]:return this.$gettext("Name ascending");case Z["h"]:case Z["f"]:return this.$gettext("Name descending")}},translateFilterOption(e){switch(e){case J["e"]:return this.$gettext("Unread");case J["c"]:return this.$gettext("Flagged");case J["a"]:return this.$gettext("Attachment");case J["b"]:return this.$gettext("Encrypted")}},async toggleFilter(e,t){const s=await this.setFilter({filter:e,active:t}),{page:a,...i}=this.$route.query;this.$router.replace({...this.$route,query:{...i,filter:s}})},isActiveFilter(e){return this.activeFilters.includes(e)}}},ae=se,ie=(s("cef0"),Object(B["a"])(ae,i,n,!1,null,null,null));t["default"]=ie.exports},"5fa1":function(e,t,s){},"5fb9":function(e,t,s){e.exports=s.p+"img/envelope-illustration-2.462343b4.svg"},"634d":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return r}));const a=[{name:"30-01-2020 (DD-MM-YYYY)",value:"DD-MM-YYYY"},{name:"01/30/2020 (MM/DD/YYYY)",value:"MM/DD/YYYY"},{name:"30.01.2020 (DD.MM.YYYY)",value:"DD.MM.YYYY"},{name:"2020-01-30 (YYYY-MM-DD)",value:"YYYY-MM-DD"}],i=[{name:"13:00 (24 hours)",value:"24h"},{name:"1:00 PM (12 hours)",value:"12h"}];function n(e){return e||a[0].value}function r(e){return e||i[0].value}},6847:function(e,t,s){"use strict";s("dafb")},"6a2f":function(e,t,s){},7978:function(e,t,s){"use strict";s("a113")},"7ae9":function(e,t,s){},"7c41":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"test",rawName:"v-test:mailPage",arg:"mailPage"}],staticClass:"container"},[t("router-view",{staticClass:"mail__header",attrs:{name:"appHeader"}}),t("MailSidebar"),e.readingPaneIsActive?t("SplitPane",{directives:[{name:"test",rawName:"v-test:mainContent",arg:"mainContent"}],staticClass:"main-content",attrs:{"local-storage-key-prefix":"mail-layout",vertical:e.verticalSplitLayout,tag:"main"},scopedSlots:e._u([{key:"first",fn:function(){return[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view",{key:e.mainViewKey,attrs:{name:"main"}})],1)]},proxy:!0},{key:"second",fn:function(){return[t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.$route.query.message?t("router-view",{key:e.$route.fullPath,attrs:{name:"pane"}}):t("PassiveMessage")],1)]},proxy:!0}],null,!1,635118347)}):t("main",{directives:[{name:"test",rawName:"v-test:mainContent",arg:"mainContent"}],staticClass:"main-content"},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view",{key:e.mainViewKey,attrs:{name:"main"}})],1)],1)],1)},i=[],n=(s("14d9"),s("8a60")),r=s.n(n),o=s("2f62"),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Sidebar",{scopedSlots:e._u([{key:"main",fn:function(){return[e.error?t("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v(" Something went wrong. Please refresh the page. ")]):t("ul",{directives:[{name:"test",rawName:"v-test:folderNavigation",arg:"folderNavigation"}],staticClass:"link-list"},[e.loading?e._l(6,(function(e){return t("li",{key:e,staticClass:"link-list__item link-list__item--loading"},[t("div",{staticClass:"loader"})])})):e._l(e.folderTree,(function(s){return t("NestedFoldersItem",{key:s.id,attrs:{"opened-path":e.activeFolderPath,"is-loading":e.isBusy.reloadingMessages,"preserve-expansion":!0,folder:s,salt:e.user.id,"sidebar-is-open":e.sidebarIsOpen,"shown-in-sidebar":!0},on:{folderItemClicked:function(t){return e.folderItemClicked(arguments[0]||s)}}})})),t("li",[t("SidebarItem",{attrs:{alternative:"",name:e.manageFoldersText,route:e.mailSettingsRoute,icon:"folder-management"}})],1)],2)]},proxy:!0}])})},c=[],d=s("2b0e"),u=s("fe177"),g=s("34f1"),m=s("5488"),h=s("2547"),p=s("1d41"),f=s("45a3"),y=d["a"].extend({components:{NestedFoldersItem:h["default"],Sidebar:u["a"],SidebarItem:f["a"]},mixins:[g["b"],m["a"]],data(){return{loading:!0,error:!1}},computed:{...Object(o["e"])("authentication",["user"]),...Object(o["c"])(["activeFolderPath","folderTree","sidebarIsOpen"]),manageFoldersText(){return this.$gettext("Manage folders")},mailSettingsRoute(){return{name:p["SETTINGS_MAIL_FOLDERS"]}}},created(){return r.a.bind("1",()=>this.$router.push({name:p["MAIL"]})),this.loadFolders().then(()=>{this.loading=!1,this.error=!1,this.resetLoadingFoldersError()}).catch(e=>{throw this.loading=!1,this.error=!0,this.setLoadingFoldersError({error:e}),e})},destroyed(){r.a.unbind("1")},methods:{...Object(o["b"])(["loadFolders","loadMessages","setToastMessage","closeMobileSidebar","setLoadingFoldersError","resetLoadingFoldersError"]),reloadMessages:Object(g["a"])("reloadingMessages",(function(e){return this.loadMessages().then(()=>{this.closeMobileSidebar(),this.setToastMessage({message:this.$gettextInterpolate(this.$gettext("%{ folder } is updated"),{folder:e})})})})),getFolderRoute(e){return{name:p["MAIL_FOLDER"],params:{folder:e.id}}},folderItemClicked(e){if(this.isBusy.reloadingMessages)return;const t=void 0!==this.$route.params["message"];e.id!==this.$route.params.folder||t?this.$router.push(this.getFolderRoute(e)):this.reloadMessages(this.getFolderName(e))}}}),v=y,b=s("2877"),x=Object(b["a"])(v,l,c,!1,null,null,null),_=x.exports,w=s("bc3e"),M=s("bda7"),k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"passive-message"},[t("img",{attrs:{alt:"",src:s("5fb9")}}),0===e.selectedMessagesLength?t("p",{staticClass:"passive-message__title"},[t("translate",[e._v("Select an email to read.")])],1):t("p",{staticClass:"passive-message__title"},[t("strong",[e._v(e._s(e.selectedMessagesLength))]),e._v(" "+e._s(e.selectedMessagesText)+" ")])])},S=[],C={name:"PassiveMessage",data(){return{SPLIT_VERTICAL:M["f"],SPLIT_HORIZONTAL:M["d"]}},computed:{...Object(o["c"])(["selectedMessagesLength"]),...Object(o["c"])("layout",["activeSplit"]),selectedMessagesText(){return this.$ngettext(" message selected"," messages selected",this.selectedMessagesLength)}}},$=C,T=(s("9da1"),Object(b["a"])($,k,S,!1,null,null,null)),I=T.exports,A=function(){var e=this,t=e._self._c;return t(e.tag,{tag:"component",staticClass:"split-pane",class:e.vertical?"split-pane--vertical":"split-pane--horizontal"},[t("div",{ref:"firstPane",staticClass:"split-pane__pane split-pane__pane--first",style:e.firstPaneStyle},[e._t("first")],2),t("div",{staticClass:"split-pane__separator",on:{mousedown:e.startResize}}),t("div",{ref:"secondPane",staticClass:"split-pane__pane split-pane__pane--second",style:e.secondPaneStyle},[e._t("second")],2)])},B=[],P=s("00a1"),F=s("ec51"),E={name:"SplitPane",components:{Icon:P["a"]},props:{localStorageKeyPrefix:{type:String,required:!0},tag:{type:String,default:"div"},vertical:{type:Boolean,default:!1}},data(){return{firstPaneRatio:null,firstPaneSize:null,secondPaneRatio:null,secondPaneSize:null}},computed:{attribute(){return this.vertical?"width":"height"},localStorageKey(){return`sm-${this.localStorageKeyPrefix}-${this.vertical?"vertical":"horizontal"}`},firstPaneStyle(){return"number"===typeof this.firstPaneSize?{[this.attribute]:Math.floor(this.firstPaneSize)+"px"}:"number"===typeof this.firstPaneRatio?{[this.attribute]:100*this.firstPaneRatio+"%"}:{}},secondPaneStyle(){return"number"===typeof this.secondPaneSize?{[this.attribute]:Math.ceil(this.secondPaneSize)+"px"}:"number"===typeof this.secondPaneRatio?{[this.attribute]:100*this.secondPaneRatio+"%"}:{}}},watch:{async vertical(){this.firstPaneSize=null,this.secondPaneSize=null;try{const{firstPaneRatio:e,secondPaneRatio:t}=await Object(F["a"])(this.localStorageKey);this.firstPaneRatio=e,this.secondPaneRatio=t}catch(e){this.firstPaneRatio=null,this.secondPaneRatio=null}this.$nextTick(this.setPanesRatio.bind(this))}},async mounted(){try{const{firstPaneRatio:e,secondPaneRatio:t}=await Object(F["a"])(this.localStorageKey);this.firstPaneRatio=e,this.secondPaneRatio=t}catch(e){this.setPanesRatio()}},methods:{setPanesRatio(){const e=this.$el.getBoundingClientRect()[this.attribute];this.firstPaneRatio=this.$refs.firstPane.getBoundingClientRect()[this.attribute]/e,this.secondPaneRatio=this.$refs.secondPane.getBoundingClientRect()[this.attribute]/e},resize(e){e.preventDefault(),window.requestAnimationFrame(()=>{const t=this.vertical?this.posX-e.clientX:this.posY-e.clientY;this.firstPaneSize=this.firstPaneSize-t,this.secondPaneSize=this.secondPaneSize+t,this.posX=e.clientX,this.posY=e.clientY})},startResize(e){document.addEventListener("mouseup",this.stopResize),document.addEventListener("mousemove",this.resize),this.posX=e.clientX,this.posY=e.clientY,this.firstPaneSize=this.$refs.firstPane.getBoundingClientRect()[this.attribute],this.secondPaneSize=this.$refs.secondPane.getBoundingClientRect()[this.attribute]},stopResize(){document.removeEventListener("mouseup",this.stopResize),document.removeEventListener("mousemove",this.resize),window.requestAnimationFrame(async()=>{this.setPanesRatio(),await Object(F["c"])(this.localStorageKey,{firstPaneRatio:this.firstPaneRatio,secondPaneRatio:this.secondPaneRatio}),this.firstPaneSize=null,this.secondPaneSize=null})}}},L=E,O=(s("92c7"),Object(b["a"])(L,A,B,!1,null,null,null)),D=O.exports,N=s("543e");const R=window.matchMedia(N["a"].SIDEBAR_NOT_COLLAPSED);var j={name:"Mail",components:{MailSidebar:_,PassiveMessage:I,SplitPane:D},data(){return{isLargeScreen:R.matches}},computed:{...Object(o["e"])({layoutSplitState:e=>e.layout.activeSplit}),...Object(o["c"])(["activeMessagesCount","loadingFoldersError"]),...Object(o["e"])({activeMessagesIds:e=>e.messages.activeMessagesIds}),readingPaneIsActive(){return(this.$route.name===p["MAIL_FOLDER"]||this.$route.name===p["MAIL_SEARCH"])&&!this.defaultLayout},isComposeRoute(){return this.$route.name===p["MAIL_COMPOSE"]},defaultLayout(){return this.layoutSplitState===M["e"]||0===this.activeMessagesCount||this.loadingFoldersError},verticalSplitLayout(){return this.layoutSplitState===M["f"]},mainViewKey(){return this.isComposeRoute?this.$route.path:this.fullPathWithoutMessage(this.$route)}},watch:{$route(e,t){this.fullPathWithoutMessage(e)!==this.fullPathWithoutMessage(t)&&this.updateState()}},created(){this.updateState(),this.$root.$on("readMessageInCurrentView",this.readMessageInCurrentView),r.a.bind(["c","m"],()=>this.$router.push({name:p["MAIL_COMPOSE"]})),R.addListener(this.handleResize)},destroy(){this.$root.$off("readMessageInCurrentView",this.readMessageInCurrentView),r.a.unbind(["c","m"]),R.removeListener(this.handleResize)},methods:{...Object(o["b"])(["setActiveFolder","setActiveSearchQuery","setSortOrder"]),...Object(o["b"])("layout",["setDefaultSplit","setLayoutSplit"]),...Object(o["b"])("filters",["setFilters"]),...Object(o["d"])({setPage:"pagination/"+w["a"]}),updateState(){const e=this.$route.query.query,t=this.$route.params.folder||this.$route.query.folder;e?this.setActiveSearchQuery({query:e}):t&&this.setActiveFolder({folderId:t});const s=this.$route.query.sortOrder;s&&this.setSortOrder({order:s});const a=this.$route.query.filter;this.setFilters({filters:(Array.isArray(a)?a:[a]).filter(Boolean)}),this.setPage(parseInt(this.$route.query.page)||1)},readMessageInCurrentView(e){e&&(this.$route.name===p["MAIL_MESSAGE"]&&this.$route.params.message!==e?this.$router.push({...this.$route,params:{...this.$route.params,message:e}}):this.$route.name!==p["MAIL_FOLDER"]&&this.$route.name!==p["MAIL_SEARCH"]||this.$route.query.message===e||this.$router.push({...this.$route,query:{...this.$route.query,message:e}}))},fullPathWithoutMessage(e){const{message:t,...s}=e.query,a=this.$router.resolve({...e,query:s});return a&&a.route&&a.route.fullPath||e.fullPath},async handleResize(e){if(e.matches){const e=await Object(F["a"])("sm-layout-split");null!==e&&this.setLayoutSplit({layoutSplit:e})}else this.setDefaultSplit()}}},q=j,V=Object(b["a"])(q,a,i,!1,null,null,null);t["default"]=V.exports},"7ec9":function(e,t,s){"use strict";const a=new RegExp("^[\\-\\w !#$%&'*+/=?^`{|}~]+$");t["a"]=function({name:e,email:t},s=!1){return s?e||t:e?(a.test(e)||(e='"'+e+'"'),`${e} <${t}>`):t}},"815e":function(e,t,s){"use strict";s("5550")},"81b2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("AppHeader",{staticClass:"message-detail-header",attrs:{"show-back-button":!0,"back-text":e.backTo},on:{backClicked:e.onBackClicked},scopedSlots:e._u([{key:"button",fn:function(){return[t("router-link",{directives:[{name:"test",rawName:"v-test:composeButton",arg:"composeButton"}],staticClass:"button button--primary button--icon-only-small-breakpoint app-header__action message-detail-header__compose-button",attrs:{to:e.composeRoute}},[t("translate",[e._v("Compose")]),t("Icon",{attrs:{symbol:"pen"}})],1),t("MailSearchForm")]},proxy:!0}])})},i=[],n=(s("14d9"),s("00a1")),r=s("9c7e"),o=s("5488"),l=s("1d41"),c=s("300a"),d=s("2f62"),u={components:{AppHeader:c["a"],Icon:n["a"],MailSearchForm:r["a"]},mixins:[o["a"]],data(){return{backFolder:{}}},computed:{...Object(d["c"])(["activeFolder"]),backTo(){return this.isSearch?this.$gettext("Search results"):this.getFolderName(this.backFolder)},isSearch(){return this.$route.query.query},composeRoute(){return{name:l["MAIL_COMPOSE"],query:{...this.$route.query,folder:this.activeFolder.id}}}},watch:{activeFolder(){Object.keys(this.backFolder).length||(this.backFolder=this.activeFolder)}},created(){this.backFolder=this.activeFolder},methods:{onBackClicked(){this.isSearch?this.$router.push({name:l["MAIL_SEARCH"],query:this.$route.query}):this.$router.push({name:l["MAIL_FOLDER"],query:this.$route.query,params:{folder:this.backFolder.id}})}}},g=u,m=(s("bd64"),s("2877")),h=Object(m["a"])(g,a,i,!1,null,null,null);t["default"]=h.exports},"821a":function(e,t,s){"use strict";s("c25a")},"86c1":function(e,t,s){},"881b":function(e,t,s){"use strict";s("7ae9")},8901:function(e,t,s){"use strict";s("91b0")},"8c68":function(e,t,s){},"8fb9":function(e,t,s){"use strict";s("5d6b")},"91b0":function(e,t,s){},"92c7":function(e,t,s){"use strict";s("5cab")},9478:function(e,t,s){"use strict";s("fa75")},"9c7e":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("SearchInputField",{attrs:{label:e.searchLabelText,"initial-query":e.$route.query.query},on:{search:e.search}})},i=[],n=(s("14d9"),s("9f81")),r=s("1d41"),o={name:"MailSearchForm",components:{SearchInputField:n["a"]},computed:{searchLabelText(){return this.$gettext("Search Mail")}},methods:{search(e){e&&this.$router.push({name:r["MAIL_SEARCH"],query:{query:e}})}}},l=o,c=s("2877"),d=Object(c["a"])(l,a,i,!1,null,null,null);t["a"]=d.exports},"9d4a":function(e,t,s){e.exports=s.p+"img/empty-state-drafts.079dc926.svg"},"9da1":function(e,t,s){"use strict";s("4ce4")},a113:function(e,t,s){},b1ae:function(e,t,s){},b1ed:function(e,t,s){"use strict";s("31ca")},b64b:function(e,t,s){"use strict";s.r(t);var a,i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"messages__header",class:{"messages__header--setup-guide-maximized":!e.isSetupGuideCollapsed&&e.isSetupGuideVisible,"messages__header--setup-guide-collapsed":e.isSetupGuideCollapsed&&e.isSetupGuideVisible,"messages__header--no-setup-guide":!e.isSetupGuideVisible}},[t("AppHeader",{attrs:{"show-navigation":!0},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"button",fn:function(){return[t("div",{staticClass:"app-header__actions"},[e.showDeleteAllButton?t("DeleteAll"):t("router-link",{directives:[{name:"test",rawName:"v-test:composeButton",arg:"composeButton"}],staticClass:"button button--primary button--icon-only-small-breakpoint app-header__action",attrs:{to:e.composeRoute}},[t("translate",{attrs:{"translate-context":"top bar button label"}},[e._v(" Compose ")]),t("Icon",{attrs:{symbol:"pen"}})],1)],1),t("MailSearchForm")]},proxy:!0}])}),e.isSetupGuideVisible?t("SetupGuide"):e._e(),t("MessagesActionsHeader"),t("SetupGuideCompletedModal",{ref:"setupGuideCompletedModal"})],1)},n=[],r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("DeleteConfirmationModal",{ref:"modal",attrs:{"ok-button-text":e.deleteText,"warning-text":e.deleteWarningText,"header-text":e.modalHeaderText,"async-action-pending":e.isBusy.deleting},on:{delete:function(t){return e.onDeleteClicked()}},scopedSlots:e._u([{key:"DeleteButton",fn:function({toggle:s}){return[t("button",{staticClass:"button button--primary button--icon-only-small-breakpoint app-header__action",attrs:{type:"button",disabled:0===e.activeMessagesCount},on:{click:s}},[t("translate",[e._v("Delete all")]),t("Icon",{attrs:{symbol:"trash"}})],1)]}}])})},o=[],l=s("2b0e"),c=s("2f62"),d=s("5488"),u=s("10db"),g=s("00a1"),m=s("34f1"),h=s("1d41"),p=l["a"].extend({name:"DeleteAll",components:{DeleteConfirmationModal:u["a"],Icon:g["a"]},mixins:[m["b"],d["a"]],computed:{...Object(c["c"])(["activeFolder","activeMessagesCount"]),...Object(c["e"])({totalMessages:e=>e.pagination.total}),modal(){return this.$refs.modal},deleteText(){return this.$gettext("Delete")},deleteWarningText(){const e=this.$gettext("All %{ number } messages in the folder ‘%{ folderName }’ will be permanently deleted. It is not possible to undo this action.");return this.$gettextInterpolate(e,{folderName:this.folderName,number:this.totalMessages||""})},modalHeaderText(){const e=this.$gettext("Delete all messages in folder ‘%{ folderName }’?");return this.$gettextInterpolate(e,{folderName:this.folderName})},folderName(){return this.getFolderName(this.activeFolder)}},methods:{...Object(c["b"])(["emptyJunk","emptyTrash","loadMessages","setToastMessage"]),onDeleteClicked:Object(m["a"])("deleting",(function(){return this.updateRoute(),this.delete().then(()=>{this.modal.toggleModal();const e=this.$gettext("All messages in the folder ‘%{ folderName }’ have been deleted.");this.setToastMessage({message:this.$gettextInterpolate(e,{folderName:this.folderName})}),this.loadMessages()}).catch(e=>{const t=this.$gettext("Could not delete messages from folder ‘%{ folderName }’.");throw this.setToastMessage({message:this.$gettextInterpolate(t,{folderName:this.folderName})}),this.loadMessages(),e})})),async delete(){return"junk"===this.activeFolder.type?this.emptyJunk():"trash"===this.activeFolder.type?this.emptyTrash():void 0},updateRoute(){if(this.$route.name===h["MAIL_MESSAGE"]){const{message:e,...t}=this.$route.query;this.$router.replace({name:h["MAIL_FOLDER"],query:t})}else if(this.$route.name===h["MAIL_FOLDER"]){const{message:e,...t}=this.$route.query;e&&this.$router.replace({...this.$route,query:t})}}}}),f=p,y=s("2877"),v=Object(y["a"])(f,r,o,!1,null,null,null),b=v.exports,x=function(){var e=this,t=e._self._c;return t("section",{staticClass:"messages-second-header"},[t("div",{staticClass:"app-header__selection-actions"},[t("div",{staticClass:"app-header__selection-status"},[t("Checkbox",{directives:[{name:"test",rawName:"v-test:messagesActionsCheck",arg:"messagesActionsCheck"},{name:"tooltip",rawName:"v-tooltip",value:{placement:"right",content:e.selectAllText,disabled:0===e.activeMessagesCount},expression:"{\n          placement: 'right',\n          content: selectAllText,\n          disabled: activeMessagesCount === 0,\n        }"}],key:Boolean(e.allMessagesSelected),attrs:{id:"selection",checked:e.allMessagesSelected&&Boolean(e.activeMessagesCount),indeterminate:e.someMessagesSelected,label:"selection",disabled:0===e.activeMessagesCount,"has-hidden-label":""},on:{change:function(t){return e.onSelectionChanged(t)}}}),e.someMessagesSelected?t("p",{staticClass:"messages-second-header__selection-label"},[e._v(" "+e._s(e.selectedMessagesText)+" ")]):e._e()],1),e.someMessagesSelected?t("div",{staticClass:"action-bar__row-left messages-second-header__large-screen-only"},[t("div",{staticClass:"action-bar__group"},[t("MoveToFolderModal",{directives:[{name:"test",rawName:"v-test:moveToFolder",arg:"moveToFolder"}],attrs:{"busy-moving":e.isBusy.moving},on:{moveToFolder:e.moveMessages}}),e.allSelectedMessagesSpam?t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.markAsNotSpamButtonTitle,expression:"markAsNotSpamButtonTitle"},{name:"test",rawName:"v-test:markAsNotSpam",arg:"markAsNotSpam"}],attrs:{icon:"not-spam"},on:{click:e.onMarkAsNotSpamClicked}}):t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.markAsSpamButtonTitle,expression:"markAsSpamButtonTitle"},{name:"test",rawName:"v-test:markAsSpam",arg:"markAsSpam"}],attrs:{icon:"spam"},on:{click:e.onMarkAsSpamClicked}}),t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.bulkToggleReadButtonText,expression:"bulkToggleReadButtonText"},{name:"test",rawName:"v-test:toggleReadStatus",arg:"toggleReadStatus"}],key:e.someSelectedMessagesUnread,attrs:{icon:e.someSelectedMessagesUnread?"unread":"read"},on:{click:e.onToggleReadClicked}}),e.allSelectedMessagesTrashed?t("DeleteConfirmationModal",{directives:[{name:"test",rawName:"v-test:deleteMessages",arg:"deleteMessages"}],attrs:{"ok-button-text":e.deleteMessageText,"warning-text":e.deleteWarningText},on:{delete:e.onDeleteClicked},scopedSlots:e._u([{key:"DeleteButton",fn:function(s){return[t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.deleteSelectedMessagesText,expression:"deleteSelectedMessagesText"}],attrs:{icon:"delete-new"},on:{click:s.toggle}})]}}],null,!1,2015895005)}):t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.trashMessagesText,expression:"trashMessagesText"},{name:"test",rawName:"v-test:trashMessages",arg:"trashMessages"}],attrs:{icon:"trash"},on:{click:e.onTrashClicked}}),t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.bulkFlagButtonText,expression:"bulkFlagButtonText"}],key:e.allSelectedMessagesFlagged?"key-1":"key-2",attrs:{icon:e.allSelectedMessagesFlagged?"flag-outline":"flag"},on:{click:e.onFlagClicked}})],1)]):e._e(),e.someMessagesSelected?t("div",{staticClass:"action-bar__row-left messages-second-header__small-screen-only"},[t("div",{staticClass:"action-bar__group"},[e.allSelectedMessagesTrashed?t("DeleteConfirmationModal",{directives:[{name:"test",rawName:"v-test:deleteMessages",arg:"deleteMessages"}],attrs:{"ok-button-text":e.deleteMessageText,"warning-text":e.deleteWarningText},on:{delete:e.onDeleteClicked},scopedSlots:e._u([{key:"DeleteButton",fn:function(s){return[t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.deleteText,expression:"deleteText"}],staticClass:"messages-second-header__delet-button",attrs:{title:e.deleteSelectedMessagesText,icon:"delete-new"},on:{click:s.toggle}})]}}],null,!1,1614126734)}):t("ActionBarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.trashMessagesText,expression:"trashMessagesText"},{name:"test",rawName:"v-test:trashMessages",arg:"trashMessages"}],attrs:{icon:"trash"},on:{click:e.onTrashClicked}})],1),t("div",{staticClass:"action-bar__group"},[t("Dropdown",{staticClass:"dropdown--align-left",scopedSlots:e._u([{key:"button",fn:function({isOpen:e,toggle:s}){return[t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:moreButton",arg:"moreButton"}],attrs:{active:e,icon:"menu-horizontal"},on:{click:s}})]}},{key:"content",fn:function({toggle:s}){return[t("ul",{staticClass:"link-list",on:{click:s}},[t("li",[t("MoveToFolderModal",{directives:[{name:"test",rawName:"v-test:moveToFolder",arg:"moveToFolder"}],attrs:{"button-text":e.moveText,"busy-moving":e.isBusy.moving},on:{moveToFolder:e.moveMessages},scopedSlots:e._u([{key:"toggle",fn:function({toggle:s}){return[t("button",{staticClass:"button button--clean link-list__item link-list__item--move-button",attrs:{type:"button"},on:{click:s}},[t("Icon",{attrs:{symbol:"folder"}}),e._v(" "+e._s(e.moveText)+" ")],1)]}}],null,!0)})],1),t("li",[t("button",{staticClass:"button button--clean link-list__item",attrs:{type:"button",title:e.bulkFlagButtonText},on:{click:e.onFlagClicked}},[t("Icon",{attrs:{symbol:e.allSelectedMessagesFlagged?"flag-outline":"flag"}}),e._v(" "+e._s(e.toggleFlagButtonLabel)+" ")],1)]),t("li",[e.allSelectedMessagesSpam?t("button",{staticClass:"button button--clean link-list__item",attrs:{type:"button",title:e.markAsNotSpamButtonTitle},on:{click:e.onMarkAsNotSpamClicked}},[t("Icon",{attrs:{symbol:"not-spam"}}),e._v(" "+e._s(e.notSpamButtonLabel)+" ")],1):t("button",{staticClass:"button button--clean link-list__item",attrs:{type:"button",title:e.markAsSpamButtonTitle},on:{click:e.onMarkAsSpamClicked}},[t("Icon",{attrs:{symbol:"spam"}}),e._v(" "+e._s(e.spamButtonLabel)+" ")],1)]),t("li",[t("button",{staticClass:"button button--clean link-list__item",attrs:{type:"button",title:e.bulkToggleReadButtonText},on:{click:e.onToggleReadClicked}},[t("Icon",{attrs:{symbol:e.someSelectedMessagesUnread?"unread":"read"}}),e._v(" "+e._s(e.toggleReadStatusText)+" ")],1)])])]}}],null,!1,1829740205)})],1)]):e._e()]),t("div",{staticClass:"action-bar__row-right"},[e.someMessagesSelected?e._e():t("div",{staticClass:"action-bar__group"},[e.searchResultView?e._e():t("div",{staticClass:"message-list__filter"},[t("Dropdown",{scopedSlots:e._u([{key:"button",fn:function({isOpen:s,toggle:a}){return[t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:messageStatusFilter",arg:"messageStatusFilter"}],staticClass:"button--small button--auto-hide-label",class:{"button--active-badge":e.activeFilters.length},attrs:{active:s,dropdown:!0,label:e.filterByText,icon:"filter",title:e.filterByText},on:{click:a}})]}},{key:"content",fn:function(){return[t("ul",{staticClass:"link-list"},e._l(e.filterOptions,(function({name:s,value:a}){return t("li",{key:a},[t("Checkbox",{staticClass:"link-list__item",attrs:{id:a,label:s,checked:e.isActiveFilter(a)},on:{change:function(t){return e.toggleFilter(a,t)}}})],1)})),0)]},proxy:!0}],null,!1,3437613763)})],1),e.searchResultView?e._e():t("div",{staticClass:"message-list__sort"},[t("Dropdown",{scopedSlots:e._u([{key:"button",fn:function({isOpen:s,toggle:a}){return[t("ActionBarButton",{directives:[{name:"test",rawName:"v-test:sortTypeButton",arg:"sortTypeButton"}],staticClass:"button--small button--auto-hide-label",attrs:{active:s,dropdown:!0,icon:"sort",title:e.sortByText,label:e.sortByText},on:{click:a}})]}},{key:"content",fn:function(){return[t("RadioInput",{staticClass:"link-list",attrs:{options:e.sortingOptions,"option-class":"link-list__item",id:"sortOrder-large-screen"},model:{value:e.sortOrder,callback:function(t){e.sortOrder=t},expression:"sortOrder"}})]},proxy:!0}],null,!1,3531209325)})],1),t("LayoutDropdown")],1),t("div",{staticClass:"action-bar__group"},[t("Pagination")],1)])])},_=[],w=s("8a60"),M=s.n(w),k=s("d379"),S=s("82ff"),C=s("ad86"),$=s("44b9"),T=s("e396"),I=s("1f79"),A=s("1802"),B=s("cd02"),P=s("a763"),F=s("97c9"),E={components:{ActionBarButton:k["a"],Checkbox:S["a"],DeleteConfirmationModal:u["a"],Dropdown:C["a"],MoveToFolderModal:$["a"],Pagination:T["a"],RadioInput:I["a"],Icon:g["a"],LayoutDropdown:A["a"]},mixins:[B["a"],d["a"],m["b"]],data(){return{messagesMovedToSpamCount:0}},computed:{...Object(c["c"])(["activeFolder","messageById","folderById","nextMessageId","pagination/currentPageSize","previousMessageId","selectedMessages"]),...Object(c["c"])("features",["featureById"]),...Object(c["e"])({activeMessagesIds:e=>e.messages.activeMessagesIds,selectedMessagesIds:e=>e.messages.selectedMessagesIds,sortOrderState:e=>e.sorting.sortOrder,activeFilters:e=>e.filters.activeFilters,paginationPageNumber:e=>e.pagination.page}),outbound(){var e;return["sent","drafts"].includes(null===(e=this.activeFolder)||void 0===e?void 0:e.type)},selectedMessagesLength(){return this.selectedMessages.length},activeMessagesCount(){return this.activeMessagesIds.length},allMessagesSelected(){return this.selectedMessagesLength===this.activeMessagesCount&&this.selectedMessagesIds.every(e=>this.activeMessagesIds.includes(e))},allSelectedMessagesFlagged(){return this.selectedMessages.every(e=>e.flagged)},allSelectedMessagesTrashed(){return this.selectedMessages.map(({folder_id:e})=>this.folderById(e)).filter(Boolean).every(({type:e})=>"trash"===e)},allSelectedMessagesSpam(){return this.selectedMessages.length>0&&this.selectedMessages.map(({folder_id:e})=>this.folderById(e)).filter(Boolean).every(({type:e})=>"junk"===e)},someSelectedMessagesUnread(){return this.selectedMessages.some(e=>e.unread)},bulkSelectButtonText(){return this.allMessagesSelected?this.$gettext("Deselect all messages"):this.$gettext("Select all messages")},bulkFlagButtonText(){return this.allSelectedMessagesFlagged?this.$ngettext("Unflag message","Unflag messages",this.selectedMessagesLength):this.$ngettext("Flag message","Flag messages",this.selectedMessagesLength)},bulkToggleReadButtonText(){return this.someSelectedMessagesUnread?this.$ngettext("Mark message read","Mark messages read",this.selectedMessagesLength):this.$ngettext("Mark message unread","Mark messages unread",this.selectedMessagesLength)},markAsSpamButtonTitle(){return this.$ngettext("Mark message as spam","Mark messages as spam",this.selectedMessagesLength)},markAsNotSpamButtonTitle(){return this.$ngettext("Mark message as not spam","Mark messages as not spam",this.selectedMessagesLength)},selectedMessagesText(){return this.$gettextInterpolate(this.$gettext("%{ n } selected"),{n:this.selectedMessagesLength})},selectAllText(){return this.selectedMessagesLength?this.$gettext("Deselect all"):this.$gettext("Select All")},searchResultView(){return this.$route.name===h["MAIL_SEARCH"]},goBackText(){return this.$gettext("Go back")},trashMessagesText(){return this.$ngettext("Move selected message to Trash","Move selected messages to Trash",this.selectedMessagesLength)},deleteSelectedMessagesText(){return this.$ngettext("Delete selected message","Delete selected messages",this.selectedMessagesLength)},deleteText(){return this.$gettext("Delete")},deleteMessageText(){return this.$ngettext("Delete message","Delete messages",this.selectedMessagesLength)},deleteWarningText(){return this.$ngettext("The selected message will be permanently deleted. It is not possible to undo this action.","The selected messages will be permanently deleted. It is not possible to undo this action.",this.selectedMessagesLength)},moveText(){return this.$gettext("Move")},spamButtonLabel(){return this.$pgettext("action button","Spam")},notSpamButtonLabel(){return this.$pgettext("action button","Not Spam")},toggleReadStatusText(){return this.someSelectedMessagesUnread?this.$gettext("Mark as read"):this.$gettext("Mark as unread")},toggleFlagButtonLabel(){return this.allSelectedMessagesFlagged?this.$pgettext("action button","Unflag"):this.$pgettext("action button","Flag")},someMessagesSelected(){return this.selectedMessagesLength>0},skeletonUiItemCount(){return this["pagination/currentPageSize"]||4},sortOrder:{get(){return this.sortOrderState},set(e){this.setSortOrder({order:e}),this.$router.replace({...this.$route,query:{...this.$route.query,sortOrder:e}})}},sortByText(){return this.$gettext("Sort by")},sortingOptions(){const e=this.outbound?P["d"]:P["c"];return Array.from(e.keys()).map(e=>({name:this.translateSortOption(e),value:e}))},filterByText(){if(1===this.activeFilters.length){const e=this.activeFilters.map(this.translateFilterOption);return this.$gettextInterpolate(this.$gettext("Filter by: %{ filter }"),{filter:e})}return 0===this.activeFilters.length?this.$gettext("Filter by"):this.$gettextInterpolate(this.$gettext("%{ number } filters"),{number:this.activeFilters.length})},filterOptions(){return Array.from(F["d"].entries()).filter(([,{featureFlag:e}])=>{if(e){const t=this.featureById(e);return!!t&&t.enabled}return!0}).map(([e])=>({name:this.translateFilterOption(e),value:e}))}},watch:{paginationPageNumber(){this.deselectAllMessages()}},mounted(){const e=e=>()=>this.selectedMessagesIds.length>0&&e();M.a.bind(["d","del","backspace"],e(this.onTrashClicked)),M.a.bind("s",e(this.onMarkAsSpamClicked)),M.a.bind("n",e(this.onToggleReadClicked)),M.a.bind("f",e(this.onFlagClicked)),M.a.bind("esc",this.onBackClicked)},beforeDestroy(){M.a.unbind(["d","del","backspace","s","n","f","esc"])},methods:{...Object(c["b"])(["changeMessagesFlagStatus","changeMessagesReadStatus","deselectAllMessages","deleteTrashedMessages","loadMessages","markMessagesAsSpam","markMessagesAsNotSpam","moveMessagesToTrash","selectAllMessages","setToastMessage","setSortOrder","setLoadingMessages"]),...Object(c["b"])("filters",["setFilter"]),isActive(e){return this.$route.params.folder===e.id},onTrashClicked:Object(m["a"])("trashing",(function(){return this.setLoadingMessages(!0),this.updateRoute(),this.moveMessagesToTrash({messagesIds:this.selectedMessagesIds}).then(e=>{const t=e.length,s=this.$ngettext("Message moved to Trash","%{ updatedCount } messages moved to Trash",t),a=this.$gettextInterpolate(s,{updatedCount:t});return this.setToastMessage({message:a}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not move your messages to Trash")}),this.loadMessages()}).finally(()=>this.setLoadingMessages(!1))})),onDeleteClicked:Object(m["a"])("deleting",(function(){return this.setLoadingMessages(!0),this.updateRoute(),this.deleteTrashedMessages({messagesIds:this.selectedMessagesIds}).then(e=>{const t=e.length,s=this.$ngettext("Message permanently deleted","%{ updatedCount } messages permanently deleted",t),a=this.$gettextInterpolate(s,{updatedCount:t});return this.setToastMessage({message:a}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not delete your trashed messages")}),this.loadMessages()}).finally(()=>this.setLoadingMessages(!1))})),onFlagClicked:Object(m["a"])("flagging",(function(){const e=!this.allSelectedMessagesFlagged;return this.changeMessagesFlagStatus({messagesIds:this.selectedMessagesIds,flagged:e}).catch(()=>{const t=e?this.$gettext("Sorry, could not unflag message"):this.$gettext("Sorry, could not flag message");this.setToastMessage({message:t}),this.loadMessages()})})),onToggleReadClicked:Object(m["a"])("togglingRead",(function(){const e=!this.someSelectedMessagesUnread,t=this.selectedMessagesIds.length;return this.changeMessagesReadStatus({messagesIds:this.selectedMessagesIds,unread:e}).then(()=>{this.setToastMessage({message:e?this.$ngettext("Message marked as unread","Messages marked as unread",t):this.$ngettext("Message marked as read","Messages marked as read",t)})}).catch(s=>{throw this.setToastMessage({message:e?this.$ngettext("Sorry, we could not mark your message as unread","Sorry, we could not mark your messages as unread",t):this.$ngettext("Sorry, we could not mark your message as read","Sorry, we could not mark your messages as read",t)}),this.loadMessages(),s})})),onMarkAsSpamClicked:Object(m["a"])("markingAsSpam",(function(){return this.setLoadingMessages(!0),this.updateRoute(),this.markMessagesAsSpam({messagesIds:this.selectedMessagesIds}).then(e=>{const t=e.length,s=this.$ngettext("Message marked as Spam and moved to Spam folder","%{ updatedCount } messages marked as Spam and moved to Spam folder",t),a=this.$gettextInterpolate(s,{updatedCount:t});return this.setToastMessage({message:a}),this.loadMessages()}).catch(e=>{throw this.setToastMessage({message:this.$gettext("Sorry, we could not mark your messages as Spam")}),this.loadMessages(),e}).finally(()=>this.setLoadingMessages(!1))})),onMarkAsNotSpamClicked:Object(m["a"])("markingAsNotSpam",(function(){return this.setLoadingMessages(!0),this.updateRoute(),this.markMessagesAsNotSpam({messagesIds:this.selectedMessagesIds}).then(e=>{const t=e.length,s=this.$ngettext("Message marked as not spam and moved to Inbox","%{ updatedCount } messages marked as not spam and moved to Inbox",t),a=this.$gettextInterpolate(s,{updatedCount:t});return this.setToastMessage({message:a}),this.loadMessages()}).catch(()=>{this.setToastMessage({message:this.$gettext("Sorry, we could not mark your messages as not spam")}),this.loadMessages()}).finally(()=>this.setLoadingMessages(!1))})),moveMessages:Object(m["a"])("moving",(function(e,t){return this.updateRoute(),this.moveSelectedMessages({folderId:e}).then(t.toggle)})),onSelectionChanged(){this.allMessagesSelected||this.someMessagesSelected?this.deselectAllMessages():this.selectAllMessages()},onBackClicked(){this.deselectAllMessages()},updateRoute(){const{message:e,...t}=this.$route.query;e&&this.$router.replace({...this.$route,query:t})},translateSortOption(e){switch(e){case P["a"]:return this.$gettext("Date ascending");case P["b"]:return this.$gettext("Date descending (default)");case P["g"]:case P["e"]:return this.$gettext("Name ascending");case P["h"]:case P["f"]:return this.$gettext("Name descending")}},translateFilterOption(e){switch(e){case F["e"]:return this.$gettext("Unread");case F["c"]:return this.$gettext("Flagged");case F["a"]:return this.$gettext("Attachment");case F["b"]:return this.$gettext("Encrypted")}},async toggleFilter(e,t){const s=await this.setFilter({filter:e,active:t}),{page:a,...i}=this.$route.query;this.$router.replace({...this.$route,query:{...i,filter:s}})},isActiveFilter(e){return this.activeFilters.includes(e)}}},L=E,O=(s("0a67"),Object(y["a"])(L,x,_,!1,null,null,null)),D=O.exports,N=s("53a2"),R=s("9c7e"),j=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("transition",{attrs:{name:"setup-guide-fade"}},[t("div",{staticClass:"setup-guide",class:{"hide-setup-content":e.isSetupGuideCollapsed}},[t("div",{staticClass:"setup-guide__header"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.isSetupGuideCollapsed?e.expandText:e.collapseText,placement:"right",disabled:e.isMobileView},expression:"{\n          content: isSetupGuideCollapsed ? expandText : collapseText,\n          placement: 'right',\n          disabled: isMobileView,\n        }"}],staticClass:"button button--subtle button--small setup-guide__title-button",attrs:{type:"button"},on:{click:e.toggleSetupGuide}},[t("Icon",{attrs:{symbol:"guides-tutorial",size:"large"}}),t("translate",[e._v("Set up guide")]),t("Icon",{attrs:{symbol:e.isSetupGuideCollapsed?"arrow-down":"arrow-up"}})],1),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.cancelText,placement:"left",disabled:e.isMobileView},expression:"{\n          content: cancelText,\n          placement: 'left',\n          disabled: isMobileView,\n        }"}],staticClass:"button button--icon-only setup-guide__close-button",attrs:{type:"button"},on:{click:e.closeSetupGuide}},[t("Icon",{attrs:{symbol:"remove-outline"}}),t("span",{staticClass:"visually-hidden",domProps:{textContent:e._s(e.cancelText)}})],1)]),t("transition",{attrs:{name:"setup-guide-fade"}},[e.isSetupGuideCollapsed?e._e():t("div",{ref:"body",staticClass:"setup-guide__body"},e._l(e.cards,(function(s){return t("SetupCard",{directives:[{name:"test",rawName:"v-test:setupGuide",value:s,expression:"cardId",arg:"setupGuide"}],key:s,attrs:{id:s,completed:e.isCardCompleted(s)}})})),1)])],1)])},q=[],V=s("79f6"),G=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{directives:[{name:"test",rawName:"v-test:setup-card",arg:"setup-card"}],staticClass:"setup-card",class:{"setup-card--completed":e.completed}},[e.completed?t("div",{directives:[{name:"test",rawName:"v-test:setup-card-content",arg:"setup-card-content"}],staticClass:"setup-card__content"},[t("Icon",{attrs:{symbol:e.icon,size:"large"}}),t("h3",{staticClass:"setup-card__title"},[e._v(" "+e._s(e.completed?e.completedTitleText:e.titleText)+" ")]),t("p",{staticClass:"setup-card__paragraph"},[e._v(" "+e._s(e.completed?e.completedParagraphText:e.paragraphText)+" ")])],1):t("router-link",{directives:[{name:"test",rawName:"v-test:setup-card-content",arg:"setup-card-content"}],staticClass:"setup-card__content",attrs:{to:{name:e.to,hash:e.hash}},nativeOn:{click:function(t){return e.updateCardMetric.apply(null,arguments)}}},[t("Icon",{attrs:{symbol:e.icon,size:"large"}}),t("h3",{directives:[{name:"test",rawName:"v-test:setupCardTitle",arg:"setupCardTitle"}],staticClass:"setup-card__title"},[e._v(" "+e._s(e.completed?e.completedTitleText:e.titleText)+" ")]),t("p",{directives:[{name:"test",rawName:"v-test:setupCardParagraph",arg:"setupCardParagraph"}],staticClass:"setup-card__paragraph"},[e._v(" "+e._s(e.completed?e.completedParagraphText:e.paragraphText)+" ")]),t("Icon",{staticClass:"setup-card__arrow",attrs:{symbol:"page-next"}})],1)],1)},Y=[],U=l["a"].extend({components:{Icon:g["a"]},props:{id:{type:String,required:!0},completed:{type:Boolean,required:!0}},methods:{updateCardMetric(){V["c"].uiEvents.create({event_type:"setup_guide_card_clicked_"+this.id})}},computed:{...Object(c["c"])("authentication",["setupGuideCards"]),icon(){if(this.completed)return"check";switch(this.id){case a.ImportEmails:return"migration-blue";case a.EnableIMAP:return"trusted-device-blue";case a.EnableTotp:return"setting-blue";case a.AddAlias:return"migration-blue";default:return""}},to(){switch(this.id){case a.ImportEmails:return"EmailMigration";case a.EnableIMAP:return"ImapTokens";case a.EnableTotp:return"AccountSettings";case a.AddAlias:return"Aliases/Personal";default:return""}},hash(){switch(this.id){case a.ImportEmails:return"#import-emails";case a.EnableIMAP:return"#enable-imap";case a.EnableTotp:return"#two-factor-authentication";case a.AddAlias:return"#add-alias";default:return""}},titleText(){switch(this.id){case a.ImportEmails:return this.$gettext("Move from another email provider");case a.EnableIMAP:return this.$gettext("Use your favorite email client");case a.EnableTotp:return this.$gettext("Enable 2FA for extra security");case a.AddAlias:return this.$gettext("Create an alias");default:return""}},completedTitleText(){switch(this.id){case a.ImportEmails:return this.$gettext("You’re in the know");case a.EnableIMAP:return this.$gettext("You’ve set up IMAP");case a.EnableTotp:return this.$gettext("You’ve set up 2FA for your account");case a.AddAlias:return this.$gettext("You’ve created an alias");default:return""}},paragraphText(){switch(this.id){case a.ImportEmails:return this.$gettext("Easily migrate from another email provider such as Google, Outlook, Yahoo, or others.");case a.EnableIMAP:return this.$gettext("Enable IMAP, then add a device to get a set of credentials for an email client.");case a.EnableTotp:return this.$gettext("Then, if someone knows your password, they won't be able to access your account without your verification device.");case a.AddAlias:return this.$gettext("You get an unlimited amount of extra StartMail email addresses, known as aliases. Use them to keep your main address exclusive.");default:return""}},completedParagraphText(){switch(this.id){case a.ImportEmails:return this.$gettext("Migrated emails and contacts will be in designated folders within your inbox and contacts.");case a.EnableIMAP:return this.$gettext("Now add the set of credentials to your email client to access your StartMail emails.");case a.EnableTotp:return this.$gettext("Each time you log in, you will be asked to enter your 2FA code.");case a.AddAlias:return this.$gettext("Visit the Aliases page to manage your aliases.");default:return""}}}}),z=U,H=(s("b1ed"),Object(y["a"])(z,G,Y,!1,null,null,null)),W=H.exports;(function(e){e["ImportEmails"]="import_emails",e["EnableIMAP"]="enable_imap_access",e["EnableTotp"]="enable_totp",e["AddAlias"]="add_alias"})(a||(a={}));const K=window.matchMedia("screen and (max-width: 849px)");var X=l["a"].extend({components:{Icon:g["a"],SetupCard:W},data(){return{cards:[a.ImportEmails,a.EnableIMAP,a.EnableTotp,a.AddAlias],isMobileView:K.matches}},async created(){await this.getPreferences()},async mounted(){window.addEventListener("resize",this.setBodyHeightStyle),await this.$nextTick(),this.updateBodyHeightStyleAfterFontsLoaded()},beforeDestroy(){window.removeEventListener("resize",this.setBodyHeightStyle)},computed:{...Object(c["c"])("authentication",["setupGuideCards","isSetupGuideCollapsed"]),...Object(c["c"])(["sidebarIsOpen"]),cancelText(){return this.$gettext("Cancel")},expandText(){return this.$gettext("Expand")},collapseText(){return this.$gettext("Collapse")}},methods:{...Object(c["b"])("authentication",{setSetupGuideVisibility:"setSetupGuideVisibility",getPreferences:"getPreferences",setSetupGuideCollapsed:"setSetupGuideCollapsed"}),updateBodyHeightStyleAfterFontsLoaded(){document.fonts?document.fonts.ready.then(()=>{this.setBodyHeightStyle()}):this.setBodyHeightStyle()},setBodyHeightStyle(){var e;const t=null===(e=this.$refs.body)||void 0===e?void 0:e.clientHeight;document.documentElement.style.setProperty("--setup-guide-body-height",(t||0)+"px")},async toggleSetupGuide(){this.setSetupGuideCollapsed(!this.isSetupGuideCollapsed),await this.$nextTick(),this.setBodyHeightStyle(),V["c"].uiEvents.create({event_type:this.isSetupGuideCollapsed?"setup_guide_toggled_closed":"setup_guide_toggled_opened"})},closeSetupGuide(){this.setSetupGuideVisibility(!1),V["c"].uiEvents.create({event_type:"setup_guide_closed"})},isCardCompleted(e){const t=this.setupGuideCards.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.is_completed)||!1}},watch:{sidebarIsOpen(){setTimeout(()=>{this.setBodyHeightStyle()},300)}}}),Q=X,J=(s("1a12"),Object(y["a"])(Q,j,q,!1,null,null,null)),Z=J.exports,ee=s("300a"),te=l["a"].extend({components:{AppHeader:ee["a"],DeleteAll:b,Icon:g["a"],MailSearchForm:R["a"],MessagesActionsHeader:D,SetupGuide:Z,SetupGuideCompletedModal:N["a"]},mixins:[d["a"]],computed:{...Object(c["c"])(["activeFolder"]),...Object(c["c"])("authentication",["isSetupGuideVisible","isSetupGuideCompletedSeen","setupGuideCards","isSetupGuideCollapsed"]),showDeleteAllButton(){return!this.activeFolder.parent_id&&("trash"===this.activeFolder.type||"junk"===this.activeFolder.type)},composeRoute(){return{name:h["MAIL_COMPOSE"],query:{...this.$route.query,folder:this.activeFolder.id}}},headerTitle(){return this.getFolderName(this.activeFolder)},showSetupGuideCompletedModal(){return this.isSetupGuideVisible&&this.setupGuideCards.length&&!this.setupGuideCards.some(e=>!e.is_completed)&&!this.isSetupGuideCompletedSeen}},methods:{toggleSetupGuideCompletedModal(){this.showSetupGuideCompletedModal&&setTimeout(()=>{var e;null===(e=this.$refs.setupGuideCompletedModal)||void 0===e||e.openModal()},3e3)}},watch:{showSetupGuideCompletedModal(){this.toggleSetupGuideCompletedModal()}},mounted(){this.toggleSetupGuideCompletedModal()}}),se=te,ae=Object(y["a"])(se,i,n,!1,null,null,null);t["default"]=ae.exports},bd64:function(e,t,s){"use strict";s("b1ae")},c25a:function(e,t,s){},c38c:function(e,t,s){e.exports=s.p+"img/message-loading.cb12e469.svg"},c799:function(e,t,s){e.exports=s.p+"img/empty-state-inbox.a25972a9.svg"},cd02:function(e,t,s){"use strict";var a=s("2b0e"),i=s("2f62"),n=s("5488");t["a"]=a["a"].extend({mixins:[n["a"]],computed:{...Object(i["e"])({selectedMessagesIds:e=>e.messages.selectedMessagesIds}),...Object(i["c"])(["folderById"])},methods:{...Object(i["b"])(["loadMessages","moveMessagesToFolder","setToastMessage","setLoadingMessages"]),moveSelectedMessages({folderId:e}){this.setLoadingMessages(!0);const t=this.folderById(e),s=this.getFolderName(t);return this.moveMessagesToFolder({messagesIds:this.selectedMessagesIds,folderId:e}).then(e=>{const t=e.length,a=this.$ngettext("1 message moved to %{ folderName }","%{ updatedCount } messages moved to %{ folderName }",t);return this.setToastMessage({message:this.$gettextInterpolate(a,{updatedCount:t,folderName:s},!0)}),this.loadMessages()}).catch(e=>{throw this.setToastMessage({message:this.$gettext("Sorry, we could not move your messages")}),this.loadMessages(),e}).finally(()=>this.setLoadingMessages(!1))}}})},cd20:function(e,t,s){"use strict";t["a"]=function(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}},cef0:function(e,t,s){"use strict";s("075f")},dafb:function(e,t,s){},dbae:function(e,t,s){e.exports=s.p+"img/attach.6e5a9878.svg"},dc14:function(e,t,s){"use strict";s("eced")},dfc9:function(e,t,s){e.exports=s.p+"img/pgp.996c2a00.svg"},e396:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return e.total?t("div",{directives:[{name:"test",rawName:"v-test:pagination",arg:"pagination"}],staticClass:"pagination",attrs:{"aria-label":e.paginationTitleText}},[t("p",{directives:[{name:"test",rawName:"v-test:paginationText",arg:"paginationText"}],staticClass:"pagination__large-screen-only"},[e._v(" "+e._s(e.paginationText)+" ")]),t("p",{directives:[{name:"test",rawName:"v-test:paginationText",arg:"paginationText"}],staticClass:"pagination__small-screen-only"},[e._v(" "+e._s(e.$store.state.pagination.newPage)+" ")]),t("button",{directives:[{name:"test",rawName:"v-test:prevPageButton",arg:"prevPageButton"}],staticClass:"button button--icon-only pagination__previous",attrs:{type:"button",disabled:1===e.$store.state.pagination.newPage,"aria-label":e.previousPageText,title:e.previousPageText},on:{click:function(t){return e.previousPage({router:e.$router})}}},[t("Icon",{attrs:{symbol:"page-next"}})],1),t("button",{directives:[{name:"test",rawName:"v-test:nextPageButton",arg:"nextPageButton"}],staticClass:"button button--icon-only",attrs:{type:"button",disabled:e.isLastPage,"aria-label":e.nextPageText,title:e.nextPageText},on:{click:function(t){return e.nextPage({router:e.$router})}}},[t("Icon",{attrs:{symbol:"page-next"}})],1)]):e._e()},i=[],n=s("00a1"),r=s("2f62"),o={components:{Icon:n["a"]},computed:{isLastPage(){return this.$store.state.pagination.newPage>=this.$store.getters["pagination/totalPages"]},total(){return this.$store.state.pagination.total},pageStart(){return this.$store.getters["pagination/newPageStart"]},pageEnd(){const e=this.$store.getters["pagination/newPageEnd"];return isNaN(e)?"?":e.toString()},paginationTitleText(){return this.$gettext("Page navigation")},previousPageText(){return this.$gettext("Previous page")},nextPageText(){return this.$gettext("Next page")},paginationText(){return this.$gettextInterpolate(this.$gettext("%{ pageStart }–%{ pageEnd } of %{ total }"),{pageStart:this.pageStart,pageEnd:this.pageEnd,total:null===this.total?"":this.total})}},methods:{...Object(r["b"])({nextPage:"pagination/next",previousPage:"pagination/previous"})}},l=o,c=(s("49d0"),s("2877")),d=Object(c["a"])(l,a,i,!1,null,null,null);t["a"]=d.exports},eced:function(e,t,s){},ee63:function(e,t,s){e.exports=s.p+"img/empty-state-folder.5bfd7492.svg"},f03c:function(e,t,s){},f9ca:function(e,t,s){e.exports=s.p+"img/empty-state-sent.72ad6822.svg"},fa75:function(e,t,s){}}]);
//# sourceMappingURL=mail.f8d6388c.js.map